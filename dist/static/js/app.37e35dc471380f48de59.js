webpackJsonp([1],{16:function(e,t,i){"use strict";function n(e){this.points=[],this.pointsSansAnchor=[],this.anchorPoint=void 0,this.firstPoint=void 0,this.hull=void 0,this.area=void 0,this.signedArea=void 0,this.perimeter=void 0,this.centroid=void 0,this.perimeterEfficiency=void 0,this.hullAreaRatio=0,this.hullNRatio=0,void 0!==e&&this.addPoints(e)}function r(e,t,i){this.x=e,this.y=t,this.index=i}i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r});i(3);n.prototype.constructor=n,n.prototype.addPoints=function(e){for(var t=0;t<e.length;t++)this.addPoint(e[t].x,e[t].y,t)},n.prototype.addPointsWithIndex=function(e){for(var t=0;t<e.length;t++)this.addPoint(e[t].x,e[t].y,e[t].index)},n.prototype.addPoint=function(e,t,i){var n=this.anchorPoint,o=new r(e,t,i);if(void 0===n)return this.anchorPoint=o,this.firstPoint=o,void this.points.push(o);n.y>t&&n.x>e||n.y===t&&n.x>e||n.y>t&&n.x===e?(this.pointsSansAnchor.push(n),this.anchorPoint=o):this.pointsSansAnchor.push(o),this.points.push(o),this.firstPoint.index>o.index&&(this.firstPoint=o)},n.prototype.pushFirstPoint=function(){this.points.push(this.points[0])},n.prototype.removeLastPoint=function(){this.points.splice(this.points.length-1,1)},n.prototype.copyPoints=function(e){return e.map(function(e){return new r(e.x,e.y,e.index)})},n.prototype.arrayAdd=function(e,t){for(var i=0;i<e.length;i++)e[i].plus(t)},n.prototype.arrayMinus=function(e,t){for(var i=0;i<e.length;i++)e[i].minus(t)},n.prototype._sortPointsByPolarAngle=function(){var e=this;return this.pointsSansAnchor.sort(function(t,i){var n=e._findPolarAngle(e.anchorPoint,t),r=e._findPolarAngle(e.anchorPoint,i);return n<r?-1:n>r?1:0})},n.prototype._findPolarAngle=function(e,t){var i,n;if(!e||!t)return 0;if(i=t.x-e.x,n=t.y-e.y,0==i&&0==n)return 0;var r=57.295779513082*Math.atan2(n,i);return this.reverse?r<=0&&(r+=360):r>=0&&(r+=360),r},n.prototype._ccw=function(e,t,i){var n=this._findPolarAngle(e,t),r=this._findPolarAngle(e,i);return n>r?!(n-r>180):!(n<r)||r-n>180},n.prototype.getHull=function(){var e,t,i=[];if(this.reverse=this.pointsSansAnchor.every(function(e){return e.x<0&&e.y<0}),e=this._sortPointsByPolarAngle(),(t=e.length)<3)return e.unshift(this.anchorPoint),e;for(i.push(e.shift(),e.shift());;){var n,r,o;if(i.push(e.shift()),n=i[i.length-3],r=i[i.length-2],o=i[i.length-1],this._ccw(n,r,o)&&i.splice(i.length-2,1),0==e.length){if(t==i.length){var s=this.anchorPoint;return i=i.filter(function(e){return!!e}),i.some(function(e){return e.x==s.x&&e.y==s.y})||i.unshift(this.anchorPoint),i}e=i,t=e.length,i=[],i.push(e.shift(),e.shift())}}},n.prototype.updateMost=function(){this.updatePerimeter(),this.updateArea(),this.updatePerimeterEfficiency(),this.updateCentroid()},n.prototype.updateAll=function(){this.updateMost(),this.updateHull(),this.updateHullAreaRatio(),this.updateHullNRatio()},n.prototype.updateAllExceptHull=function(){this.updateMost()},n.prototype.updateHull=function(){var e=this.getHull(),t=new n;t.addPointsWithIndex(e),t.updateAllExceptHull(),t.hull=t,this.hull=t},n.prototype.updateCentroid=function(){void 0===this.area&&this.updateArea(),this.pushFirstPoint(),this.centroid=this.getCentroid(this.points,this.signedArea),this.removeLastPoint()},n.prototype.updatePerimeter=function(){this.pushFirstPoint(),this.perimeter=this.getPerimeter(this.points),this.removeLastPoint()},n.prototype.updateArea=function(){this.pushFirstPoint();var e=this.getArea(this.points);this.area=Math.abs(e),this.signedArea=e,this.removeLastPoint()},n.prototype.updatePerimeterEfficiency=function(){void 0!==this.area&&void 0!==this.perimeter||(this.updateArea(),this.updatePerimeter());var e=this.area,t=this.perimeter;this.perimeterEfficiency=this.getPerimeterEfficiency(e,t)},n.prototype.updateHullAreaRatio=function(){void 0!==this.area&&void 0!==this.hull&&(this.hullAreaRatio=this.hull.area/this.area)},n.prototype.updateHullNRatio=function(){void 0!==this.hull&&(this.hullNRatio=this.hull.points.length/this.points.length)},n.prototype.getPerimeter=function(e){for(var t,i,n,r,o=0,s=1;s<e.length;s++){t=e[s-1].x,i=e[s].x,n=e[s-1].y,r=e[s].y;var a=Math.pow(i-t,2),c=Math.pow(r-n,2);o+=Math.sqrt(a+c)}return o},n.prototype.getArea=function(e){for(var t,i,n,r,o=0,s=0;s<e.length-1;s++)t=e[s].x,n=e[s+1].x,i=e[s].y,r=e[s+1].y,o+=t*r-i*n;return o/2},n.prototype.getPerimeterEfficiency=function(e,t){return 2*Math.sqrt(Math.PI*e)/t},n.prototype.getCentroid=function(e,t){void 0===t&&(t=getArea(e));for(var i=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),o=0,s=0,a=0;a<i.length-1;a++){var c=i[a],u=i[a+1],h=n[a],p=n[a+1],d=c*p-u*h;o+=(c+u)*d,s+=(h+p)*d}return o/=6*t,s/=6*t,new r(o,s,0)},n.prototype.getDistances=function(e,t){for(var i=[],n=0;n<t.length;n++)i.push(this.getDistance(e,t[n]));return i},n.prototype.getDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},n.prototype.getPerpendicularDistance=function(e,t,i){function n(e){return e*e}function r(e,t){return n(e.x-t.x)+n(e.y-t.y)}return Math.sqrt(function(e,t,i){var n=r(t,i);if(0==n)return r(e,t);var o=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/n;return o=Math.max(0,Math.min(1,o)),r(e,{x:t.x+o*(i.x-t.x),y:t.y+o*(i.y-t.y)})}(e,t,i))},n.prototype.getConsecutiveDistances=function(e){for(var t,i,n=[],r=0;r<e.length-1;r++)t=e[r],i=e[r+1],n.push(this.getDistance(t,i));return n},n.prototype.getSlope=function(e,t){return(t.y-e.y)/(t.x-e.x)},n.prototype.getLineEquationY=function(e,t){var i=this.getSlope(e,t),n=t.y-i*t.x;return function(e){return i*e+n}},n.prototype.getLineEquationX=function(e,t){var i=this.getSlope(e,t),n=t.y-i*t.x;return function(e){return(e-n)/i}},n.prototype.getXAlongLineAtY=function(e,t,i){return this.getLineEquationX(t,i)(e)},n.prototype.getYAlongLineAtX=function(e,t,i){return this.getLineEquationY(t,i)(e)},n.prototype.getAngle=function(e,t,i){var n=this.getDistance(e,t),r=this.getDistance(e,i),o=this.getDistance(t,i),s=Math.pow(n,2),a=Math.pow(r,2),c=Math.pow(o,2);return Math.acos((s+a-c)/(2*n*r))},n.prototype.isNearVertex=function(e,t,i){return this.getDistance(e,t)<=i},n.prototype.isNearVertices=function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(this.isNearVertex(e[r],t,i));return n},n.prototype.doesIntersect=function(e,t,i,n){var r=this.getSlope(t,i),o=t.y-r*t.x,s=r*e.x+o;return Math.abs(s-e.y)<=n},r.prototype.constructor=r,r.prototype.copy=function(){return new r(this.x,this.y,this.index)},r.prototype.minus=function(e){e instanceof r?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=e)},r.prototype.plus=function(e){e instanceof r?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=e)}},2:function(e,t,i){"use strict";function n(){this.topics={},this.topicMap={newShapeReady:"newShapeReady",endOfSequence:"endOfSequence",newSequenceSetCreated:"newSequenceSetCreated",newSequenceCreated:"newSequenceCreated",newActiveSequence:"newActiveSequence",newEditedSequence:"newEditedSequence",newActiveSequenceSet:"newActiveSequenceSet",newNoteTimesReady:"newNoteTimesReady"}}i.d(t,"a",function(){return r}),n.prototype.constructor=n,n.prototype.subscribe=function(e,t,i){this.topics[e]||(this.topics[e]=[]),this.topics[e].push({method:t,id:i})},n.prototype.publish=function(e,t,i){if(!this.topics[e])throw new Error("No "+e+" exists");this.topics.length<1||this.topics[e].forEach(function(e){void 0===i?e.method(t||{}):i===e.id&&e.method(t||{})})};var r=new n},26:function(e,t,i){"use strict";function n(e,t){this.vertices=e,this.points=e.points,this.identity=t,this.getCenter()}function r(e){var t=e.points.length-1;this.vertices=e,this.points=[e.points[0],e.points[t]],this.identity="line",this.getCenter()}function o(e,t,i){this.vertices=e,this.center=t,this.radius=i,this.points=[t],this.identity="circle"}i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"c",function(){return o});var s=i(56),a=i.n(s),c=i(3),u=i(16);n.prototype.constructor=n,n.prototype.update=function(){this.vertices.updateAllExceptHull(),this.getCenter()},n.prototype.getCenter=function(){this.center=this.vertices.centroid},n.prototype.centerOn=function(e){e.minus(this.center),this.vertices.arrayAdd(this.points,e),this.update()},n.prototype.isNearVertices=function(e,t){return this.vertices.isNearVertices(this.points,e,t)},n.prototype.getVerticesNear=function(e,t){var i=this.isNearVertices(e,t);return c.a.logicalKeep(this.points,i)},n.prototype.isNearCenter=function(e,t){return this.vertices.isNearVertices([this.center],e,t)[0]},n.prototype.drawLine=function(e,t){void 0===t&&(t=!0);var i=e.getContext("2d"),n=this.vertices.copyPoints(this.points);n.push(n[0]),t&&i.clearRect(0,0,e.width,e.height);for(var r=0;r<n.length-1;r++)i.beginPath(),i.moveTo(n[r].x,n[r].y),i.lineTo(n[r+1].x,n[r+1].y),i.stroke()},n.prototype.drawDots=function(e,t,i){void 0===i&&(i=!0);var n=e.getContext("2d"),r=this.vertices.copyPoints(this.points);r.push(this.center),i&&n.clearRect(0,0,e.width,e.height);for(var o=0;o<r.length;o++){0===r[o].index?n.fillStyle="gray":(r[o].index,n.fillStyle="gray");var s=r[o].x-t/2,a=r[o].y-t/2;n.fillRect(s,a,t,t)}},r.prototype=a()(n.prototype),r.prototype.constructor=r,r.prototype.getCenter=function(){var e=this.points,t=this.vertices,i=(e[1].x-e[0].x)/2+e[0].x,n=t.getYAlongLineAtX(i,e[0],e[1]);this.center=new u.a(i,n,0)},o.prototype=a()(n.prototype),o.prototype.constructor=o,o.prototype.update=function(){this.vertices.updateAllExceptHull()},o.prototype.drawLine=function(e,t){void 0===t&&(t=!0);var i=e.getContext("2d"),n=this.points[0],r=this.radius;t&&i.clearRect(0,0,e.width,e.height),i.beginPath(),i.arc(n.x,n.y,r,0,2*Math.PI),i.stroke()}},3:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={};n.contains=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},n.unique=function(e){for(var t=[e[0]],i=1;i<e.length;i++)this.contains(t,e[i])||t.push(e[i]);return t},n.resample=function(e,t){if(e.length<=t)return e;for(var i=Math.ceil(e.length/t),n=[],r=0;r<e.length;)n.push(e[r]),r+=i;return n},n.findMin=function(e){for(var t=-1,i=1/0,n=0;n<e.length;n++)e[n]<i&&(t=n,i=e[n]);return t},n.findMax=function(e){for(var t=-1,i=-1/0,n=0;n<e.length;n++)e[n]>i&&(t=n,i=e[n]);return t},n.sum=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t},n.mean=function(e){return this.sum(e)/e.length},n.combs=function(e,t){function i(e,t,n,r,o){if(r.length>=t)o.push(r);else{var s;for(s=n;s<e.length;++s)i(e,t,s+1,r.concat(e[s]),o)}}var n=[];return function(e,t,n){i(e,t,0,[],n)}(e,t,n),n},n.logicalKeep=function(e,t){for(var i=[],n=0;n<e.length;n++)t[n]&&i.push(e[n]);return i},n.randId=function(e){var t=Math.random().toString(36).substring(7);return null==e?t:e+t}},42:function(e,t,i){"use strict";var n=i(25),r=i(100),o=i(97),s=i.n(o);n.a.use(r.a),t.a=new r.a({routes:[{path:"/",name:"Hello",component:s.a}]})},43:function(e,t,i){function n(e){i(95)}var r=i(41)(i(45),i(99),n,null,null);e.exports=r.exports},44:function(e,t,i){"use strict";function n(){l.width=window.innerWidth,l.height=window.innerHeight}var r=i(2),o=i(9),s=i(50),a=i(54),c=i(47),u=i(52),h=new s.a,p=o.a.filenames[0],d=h.createSet(p),l=(h.createSet(p),document.createElement("canvas")),f=(l.getContext("2d"),new c.a(a.a,l)),v=new u.a(a.a,f);r.a.publish(r.a.topicMap.newActiveSequenceSet,{sequenceSetId:d.id}),r.a.subscribe(r.a.topicMap.newNoteTimesReady,function(e){}),n(),v.handleTouch(),f.animate(),d.createSequence(p),h.loop(),document.body.appendChild(l),window.addEventListener("resize",n),window.addEventListener("keydown",function(e){27===e.keyCode?h.cancelLoop():32===e.keyCode&&h.loop()})},45:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},46:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},47:function(e,t,i){"use strict";function n(e,t){this.world=e,this.canvas=t,this.shouldAnimate=!0,this.isRecording=!1,this.stroke=[],this.style={editedVertices:{shape:"circle",size:30}},this.pendingNotes=[],this.activeNotes=[],this.noteTimeTolerance=1/60,this.subscribe()}i.d(t,"a",function(){return n});var r=i(2),o=i(9);n.prototype.subscribe=function(){var e=r.a.topicMap.newNoteTimesReady;r.a.subscribe(e,this.handleNewNoteTimes.bind(this))},n.prototype.handleNewNoteTimes=function(e){for(var t=0;t<e.noteTimes.length;t++)this.pendingNotes.push({noteTime:e.noteTimes[t],point:e.points[t],noteDuration:e.noteDuration,loopIndex:e.loopIndex})},n.prototype.constructor=n,n.prototype.animate=function(){if(this.shouldAnimate){var e=this.world,t=this.canvas,i=e.getEditedShape();if(this.updateActiveNotes(),void 0===i||this.isRecording)if(this.isRecording)this.drawLine(this.stroke);else{var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height)}else i.drawLine(t),i.drawDots(t,30,!1);for(var r=0;r<this.activeNotes.length;r++)void 0!==i&&this.drawDots([this.activeNotes[r].point],40,!1);window.requestAnimationFrame(this.animate.bind(this))}},n.prototype.updateActiveNotes=function(){for(var e=[],t=[],i=0;i<this.pendingNotes.length;i++){var n=this.pendingNotes[i],r=o.a.context.currentTime,s=n.noteTime;Math.abs(s-r)<this.noteTimeTolerance?this.activeNotes.push(n):e.push(n)}for(var a=0;a<this.activeNotes.length;a++){var c=this.activeNotes[a];o.a.context.currentTime-(c.noteTime+c.noteDuration)>this.noteTimeTolerance&&t.push(a-t.length)}for(var u=0;u<t.length;u++)this.activeNotes.splice(t[u],1);this.pendingNotes=e},n.prototype.drawLine=function(e,t){var i=this.canvas,n=i.getContext("2d");void 0===t&&(t=!0),t&&n.clearRect(0,0,i.width,i.height);for(var r=0;r<e.length-1;r++)n.beginPath(),n.moveTo(e[r].x,e[r].y),n.lineTo(e[r+1].x,e[r+1].y),n.stroke()},n.prototype.drawDots=function(e,t,i){var n=this.canvas,r=n.getContext("2d");void 0===i&&(i=!0),i&&r.clearRect(0,0,n.width,n.height);for(var o=0;o<e.length;o++){r.fillStyle="gray";var s=e[o].x-t/2,a=e[o].y-t/2;r.fillRect(s,a,t,t)}}},48:function(e,t,i){"use strict";function n(e,t){this.sequenceSet=e,this.shape=void 0,this.id=s.a.randId(),this.filename=t,this.shouldLoop=!0,this.isActive=!1,this.loopIndex=0,this.nBeats=4,this.noteLength="quarter",this.currentBeat=r.a.getCurrentBeat(),this.sources=[],this.subscribe()}i.d(t,"a",function(){return n});var r=i(9),o=i(2),s=i(3);n.prototype.constructor=n,n.prototype.subscribe=function(){var e=o.a.topicMap.newShapeReady;o.a.subscribe(e,this.registerShape.bind(this),this.id)},n.prototype.registerShape=function(e){var t=e.sequenceId,i=e.shape;if(t===this.id)if(void 0!==i)switch(this.shape=i,i.identity){case"triangle":this.nBeats=4,this.noteLength="eighthTriplet";break;case"rectangle":this.nBeats=4,this.noteLength="quarter";break;case"circle":this.nBeats=4,this.noteLength="sixteenth";break;case"line":this.nBeats=4,this.noteLength="eighth";break;case"random":this.nBeats=4,this.noteLength="sixteenthTriplet"}else{this.nBeats=4,this.noteLength="quarter",this.shape=i;for(var n=0;n<this.sources.length;n++)this.sources[n].stop(0)}},n.prototype.loop=function(){var e=this,t=o.a.topicMap.newActiveSequence;this.currentBeat=r.a.getCurrentBeat(),this.shouldLoop=!0,this.loopIndex=0,o.a.publish(t,{sequenceId:this.id,sequenceSetId:this.sequenceSet.id});!function t(){if(e.shouldLoop){var i=r.a.getCurrentBeat(),n=e.nBeats,s=e.loopIndex,a=e.filename,c=e.noteLength,u=e.shape,h=void 0,p=o.a.topicMap.newNoteTimesReady;if(void 0!==u&&(h=u.points,"rectangle"===u.identity&&(h=[h[s]])),i===e.currentBeat)return void window.requestAnimationFrame(t);if(void 0!==u){var d=r.a.schedulePlay(a,{noteLength:c,sequence:e}),l=r.a.context.currentTime;o.a.publish(p,{sequenceId:e.id,sequenceSetId:e.sequenceSet.id,noteTimes:d.noteTimes,noteDuration:d.noteDuration,currentTime:l,loopIndex:s,shape:u,points:h})}if(e.currentBeat=i,s===n-1)return void o.a.publish("endOfSequence",{},e.sequenceSet.id);e.loopIndex++,window.requestAnimationFrame(t)}}()}},49:function(e,t,i){"use strict";function n(){this.sequences=[],this.activeSequenceIndex=void 0,this.activeSequenceId=void 0,this.id=o.a.randId(),this.subscribe()}i.d(t,"a",function(){return n});var r=i(2),o=(i(9),i(3)),s=i(48);n.prototype.constructor=n,n.prototype.subscribe=function(){var e=r.a.topicMap.endOfSequence;r.a.subscribe(e,this.nextSequence.bind(this),this.id)},n.prototype.cancelLoop=function(){0!==this.sequences.length&&(this.sequences[this.activeSequenceIndex].shouldLoop=!1)},n.prototype.loop=function(){if(0!==this.sequences.length){var e=this.sequences[this.activeSequenceIndex];this.activeSequenceId=e.id,e.loop()}},n.prototype.nextSequence=function(){this.activeSequenceIndex===this.sequences.length-1?this.activeSequenceIndex=0:this.activeSequenceIndex++,this.loop()},n.prototype.createSequence=function(e){var t=new s.a(this,e),i=this.id;this.sequences.push(t),1===this.sequences.length&&(this.activeSequenceIndex=0,this.activeSequenceId=t.id),r.a.publish(r.a.topicMap.newSequenceCreated,{sequenceId:t.id,sequenceSetId:i})}},50:function(e,t,i){"use strict";function n(){this.sequenceSets=[]}i.d(t,"a",function(){return n});var r=i(2),o=i(49);n.prototype.constructor=n,n.prototype.createSet=function(e){var t=new o.a(e),i=r.a.topicMap.newSequenceSetCreated;return r.a.publish(i,{sequenceSetId:t.id}),this.sequenceSets.push(t),t},n.prototype.loop=function(){for(var e=0;e<this.sequenceSets.length;e++)this.sequenceSets[e].loop()},n.prototype.cancelLoop=function(){for(var e=0;e<this.sequenceSets.length;e++)this.sequenceSets[e].cancelLoop()}},51:function(e,t,i){"use strict";function n(e){this.vertices=e,this.criteria={rectangle:{axisRatioThreshold:.5},circle:{globalThreshold:.5},triangle:{globalThreshold:10},line:{distanceThreshold:.4,perpDistanceThreshold:.05},random:{globalThreshold:.5}},this.estimatedVertices={rectangle:[],circle:[],triangle:[],line:[]},this.identity=void 0}i.d(t,"a",function(){return n});var r=i(16),o=i(26),s=i(3);n.prototype.constructor=n,n.prototype.updateEstimatedVertices=function(){this.estimatedVertices.rectangle=this.getEstimatedRectVertices(),this.estimatedVertices.triangle=this.getEstimatedTriangleVertices(),this.estimatedVertices.circle=this.getEstimatedCircleVertices(),this.estimatedVertices.line=this.getEstimatedLineVertices()},n.prototype.getEstimatedTriangleVertices=function(){for(var e=this.vertices.hull,t=e.points,i=[],n=0;n<t.length;n++)i.push(n);var r,o=-1/0;i=s.a.combs(i,3);for(var n=0;n<i.length;n++){var a=i[n],c=t[a[0]],u=t[a[1]],h=t[a[2]],p=[c,u,h],d=Math.abs(e.getArea(p));d>o&&(r=[c,u,h],o=d)}return r},n.prototype.getEstimatedRectVertices=function(){function e(e){return e.x<a.x&&e.y>a.y}function t(e){return e.x>a.x&&e.y>a.y}function i(e){return e.x<a.x&&e.y<a.y}function n(e){return e.x>a.x&&e.y<a.y}var r=this.vertices.hull,o=r.points,a=r.centroid,c=o.filter(e),u=o.filter(t),h=o.filter(i),p=o.filter(n),d=c.length,l=u.length,f=h.length,v=p.length;if(0===d||0===l||0===f||0===v)return[];var g=r.getDistances(a,c),y=r.getDistances(a,u),m=r.getDistances(a,h),S=r.getDistances(a,p),x=s.a.findMax(g),q=s.a.findMax(y),w=s.a.findMax(m),b=s.a.findMax(S);return[c[x],u[q],h[w],p[b]]},n.prototype.getEstimatedCircleVertices=function(){var e=this.vertices,t=e.hull.points,i=e.hull.centroid,n=e.getDistances(i,t),o=s.a.sum(n),a=n.length,c=o/a;return[i,new r.a(i.x,i.y+c,0)]},n.prototype.getEstimatedLineVertices=function(){var e=this.vertices.points.length;return[this.vertices.points[0],this.vertices.points[e-1]]},n.prototype.getLikelihoodRect=function(){function e(e,t,n){var r=i.getSlope(e,n),o=i.getSlope(t,n),s=i.getSlope(e,t);return r/s*(o/s)}var t=this.estimatedVertices.rectangle;if(0===t.length)return 0;var i=this.vertices.hull,n=t[0],r=t[1],o=t[2],s=t[3],a=i.centroid,c=e(n,s,a),u=e(o,r,a);this.criteria.rectangle.axisRatioThreshold;return Math.max(c,u)},n.prototype.getLikelihoodCircle=function(){var e=this.vertices,t=e.hull,i=e.points,n=t.points,r=i.length,o=n.length,s=o/r,a=e.area,c=t.area,u=a/c;return e.perimeterEfficiency*s*u},n.prototype.getLikelihoodTriangle=function(){var e=this.estimatedVertices.triangle,t=this.vertices.hull.area;return void 0===e?1/0:t/Math.abs(this.vertices.getArea(e))},n.prototype.getLikelihoodLine=function(){for(var e,t=this.vertices,i=t.points,n=i[0],r=i[i.length-1],o=[],a=[],c=t.getDistance(n,r),u=1;u<i.length-2;u++)e=t.getPerpendicularDistance(i[u],n,r),o.push(e/c);for(var u=0;u<i.length-2;u++)a.push(t.getDistance(i[u],i[u+1]));return{distanceRatio:c/s.a.sum(a),perpDistanceRatio:Math.max.apply(Math,o)}},n.prototype.getLikelihoodRandom=function(){return this.vertices.perimeterEfficiency},n.prototype.isRectangle=function(){var e=this.getLikelihoodRect(),t=this.criteria.rectangle.axisRatioThreshold;return Math.abs(e-1)<t},n.prototype.isCircle=function(){return this.getLikelihoodCircle()>this.criteria.circle.globalThreshold},n.prototype.isTriangle=function(){return this.getLikelihoodTriangle()<this.criteria.triangle.globalThreshold},n.prototype.isLine=function(){var e=this.getLikelihoodLine(),t=e.distanceRatio,i=e.perpDistanceRatio,n=this.criteria.line.distanceThreshold,r=this.criteria.line.perpDistanceThreshold;return t-1<n&&i<r},n.prototype.isRandom=function(){return this.getLikelihoodRandom()<this.criteria.random.globalThreshold},n.prototype.getAdjustedRectVertices=function(){var e=this.estimatedVertices.rectangle,t=new r.b(e),i=t._sortPointsByPolarAngle();i.unshift(t.anchorPoint),t.points=i,t.updateAllExceptHull(),i.push(i[0]);var n=t.getConsecutiveDistances(i),o=s.a.mean(n),a=t.centroid,c=new r.a(o/2,o/2,0),u=a.copy(),h=a.copy(),p=a.copy(),d=a.copy();u.minus(c),h.x-=c.x,h.y+=c.y,p.plus(c),d.x+=c.x,d.y-=c.y;var l=new r.b([u,h,p,d]);return l.updateAll(),l},n.prototype.getAdjustedTriangleVertices=function(){for(var e=this.vertices,t=this.estimatedVertices.triangle,i=e.hull.centroid,n=e.getDistances(i,t),o=.9*s.a.mean(n),a=[],c=0;c<3;c++){var u=i.copy();0===c?u.y-=o:1===c?(u.y+=o,u.x-=o):(u.y+=o,u.x+=o),a.push(u)}var h=new r.b(a);return h.updateAll(),h},n.prototype.getLine=function(){return new o.a(this.vertices)},n.prototype.getRectangle=function(){var e=this.getAdjustedRectVertices();return new o.b(e,"rectangle")},n.prototype.getTriangle=function(){var e=this.getAdjustedTriangleVertices();return new o.b(e,"triangle")},n.prototype.getCircle=function(){var e=this.vertices,t=this.estimatedVertices.circle,i=t[0],n=t[1].y-i.y;return new o.c(e,i,n)},n.prototype.getRandom=function(){return new o.b(this.vertices,"random")},n.prototype.getDetectedShape=function(){switch(this.identity){case"line":return this.getLine();case"rectangle":return this.getRectangle();case"circle":return this.getCircle();case"triangle":return this.getTriangle();case"random":default:return this.getRandom()}},n.prototype.identify=function(){var e,t=this.isRectangle(),i=this.isCircle(),n=this.isTriangle(),r=this.isLine(),o=this.isRandom();e=r?"line":o?"random":i?"circle":t?"rectangle":n?"triangle":void 0,this.identity=e}},52:function(e,t,i){"use strict";function n(e,t){this.world=e,this.animator=t}i.d(t,"a",function(){return n});var r=i(3),o=i(51),s=(i(26),i(16)),a=i(2),c=i(96),u=i.n(c);n.prototype.constructor=n,n.prototype.handleTouch=function(){function e(e){h={x:e.clientX,y:e.clientY}}function t(e){if(d=!0,l=c.world.getEditedShape(),m=c.world.editedSequenceId,y=m,void 0===l)return v.isRecording=!0,void requestAnimationFrame(r);var t=l.getVerticesNear(h,S),i=l.isNearCenter(h,S);if(0===t.length&&!i)return c.publishNewShape(void 0),v.isRecording=!0,void requestAnimationFrame(r);v.isRecording=!1,t.length>0?(f=t[0],requestAnimationFrame(o)):requestAnimationFrame(a)}function i(){y=c.world.editedSequenceId}function n(){d=!1,i(),v.isRecording&&y===m&&(v.isRecording=!1,c.handleNewStroke(p),p=[],v.stroke=[])}function r(){i(),d&&y===m&&(p.push(h),v.stroke=p,requestAnimationFrame(r))}function o(){i(),d&&y===m&&(f.x=Math.round(h.x),f.y=Math.round(h.y),l.update(),requestAnimationFrame(o))}function a(){if(i(),d&&y===m){var e=new s.a(h.x,h.y,0);l.centerOn(e),l.update(),requestAnimationFrame(a)}}var c=this,h=void 0,p=[],d=!0,l=void 0,f=void 0,v=this.animator,g=v.canvas,y=void 0,m=void 0,S=v.style.editedVertices.size;v.isRecording=!1,u()(g).on("down",t).on("up",n).on("move",e)},n.prototype.publishNewShape=function(e){var t=this.world.editedSequenceId,i=this.world.activeSequenceSetId,n=a.a.topicMap.newShapeReady;a.a.publish(n,{shape:e,sequenceId:t,sequenceSetId:i})},n.prototype.handleNewStroke=function(e){e=r.a.unique(r.a.resample(e,256));var t=new s.b(e);t.updateAll();var i=new o.a(t);i.updateEstimatedVertices(),i.identify();var n=i.getDetectedShape();this.publishNewShape(n)}},53:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(25),r=i(43),o=i.n(r),s=i(42);i(44);n.a.config.productionTip=!1,new n.a({el:"#app",router:s.a,template:"<App/>",components:{App:o.a}})},54:function(e,t,i){"use strict";function n(){this.shapes=[],this.subscribe(),this.editedSequenceId=void 0,this.activeSequenceIds=[],this.activeSequenceSetId=void 0}i.d(t,"a",function(){return o});var r=i(2);n.prototype.constructor=n,n.prototype.subscribe=function(){var e=r.a.topicMap.newShapeReady,t=r.a.topicMap.newSequenceSetCreated,i=r.a.topicMap.newSequenceCreated,n=r.a.topicMap.newActiveSequence,o=r.a.topicMap.newActiveSequenceSet;r.a.subscribe(t,this.registerSequenceSet.bind(this)),r.a.subscribe(i,this.registerSequence.bind(this)),r.a.subscribe(e,this.registerShape.bind(this)),r.a.subscribe(n,this.updateActiveSequence.bind(this)),r.a.subscribe(o,this.updateActiveSequenceSet.bind(this))},n.prototype.updateEditedSequence=function(){var e=this.findActiveSequenceIdBySequenceSetId(this.activeSequenceSetId);this.editedSequenceId=this.activeSequenceIds[e].sequenceId},n.prototype.updateActiveSequence=function(e){var t=e.sequenceSetId,i=e.sequenceId,n=this.findActiveSequenceIdBySequenceSetId(t);this.activeSequenceIds[n].sequenceId=i,this.updateEditedSequence()},n.prototype.updateActiveSequenceSet=function(e){this.activeSequenceSetId=e.sequenceSetId,this.updateEditedSequence()},n.prototype.registerSequenceSet=function(e){this.activeSequenceIds.push({sequenceSetId:e.sequenceSetId,sequenceId:void 0})},n.prototype.registerSequence=function(e){e.shape=void 0,this.registerShape(e)},n.prototype.registerShape=function(e){var t=e.shape,i=e.sequenceId,n=e.sequenceSetId;if(this.isShapeWithSequenceId(i)){var r=this.findShapeBySequenceId(i);this.shapes[r].shape=t}else this.shapes.push({shape:t,sequenceId:i,sequenceSetId:n})},n.prototype.findActiveSequenceIdBySequenceSetId=function(e){for(var t=0;t<this.activeSequenceIds.length;t++)if(this.activeSequenceIds[t].sequenceSetId===e)return t;return-1},n.prototype.getShapesBySequenceSetId=function(e){return this.shapes.filter(function(t){return t.sequenceSetId===e}).shape},n.prototype.getShapeBySequenceId=function(e){var t=this.findShapeBySequenceId(e);if(-1!==t)return this.shapes[t].shape},n.prototype.getEditedShape=function(){return this.getShapeBySequenceId(this.editedSequenceId)},n.prototype.findShapeBySequenceId=function(e){for(var t=0;t<this.shapes.length;t++)if(this.shapes[t].sequenceId===e)return t;return-1},n.prototype.isShapeWithSequenceId=function(e){return-1!==this.findShapeBySequenceId(e)};var o=new n},9:function(e,t,i){"use strict";function n(e){this.bpm=e.bpm,this.interval=60/this.bpm,this.currentBeat=1,this.context=this.initContext(),this.buffers=[],this.filenames=e.filenames,this.defaultPlayProperties={audible:!0,pitch:{min:0,max:0}},this.validate(),this.playedDummySound=!1}i.d(t,"a",function(){return c});var r=i(55),o=i.n(r),s=i(57),a=i.n(s);i(3);n.prototype.constructor=n,n.prototype.initContext=function(){var e=window.AudioContext||window.webkitAudioContext||-1;return-1===e?e:new e},n.prototype.validate=function(){if(void 0===window.requestAnimationFrame)throw new Error("requestAnimationFrame is not supported in this browser");if(-1===this.context)throw new Error("Web audio is not supported in this browser")},n.prototype.loadTestSounds=function(){var e=this.filenames,t=this,i=this.buffers;e.map(function(e){var n="https://dl.dropboxusercontent.com/s/mt0s5oj4tx1lre2/"+e,r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){t.context.decodeAudioData(r.response,function(t){i.push({filename:e,buffer:t})})},r.send()})},n.prototype.loadSound=function(e){var t=this;return new a.a(function(i,n){var r=new XMLHttpRequest,o="/sounds/"+e;r.open("GET",o),r.responseType="arraybuffer",r.onload=function(){t.context.decodeAudioData(r.response,function(e){i(e)})},r.onerror=function(e){n(e)},r.send()})},n.prototype.loadSounds=function(){var e=[],t=this.buffers,i=this.filenames,n=this;return i.map(function(t){e.push(n.loadSound(t))}),a.a.all(e).then(function(e){for(var n=0;n<e.length;n++)t.push({filename:i[n],buffer:e[n]})}).catch(function(e){console.log("An error occurred while loading sounds")})},n.prototype.getBufferByFilename=function(e){var t=this.buffers.filter(function(t){return t.filename===e});if(0===t.length)return-1;if(t.length>1)throw new Error("More than one buffer found for"+e);return t[0].buffer},n.prototype.getCurrentBeat=function(){var e=this.context.currentTime,t=this.interval;return Math.floor(e/t)},n.prototype.schedulePlay=function(e,t){var i=this.interval,n=this.getCurrentBeat(),r=t.noteLength,s=void 0,a=void 0,c=void 0,u=[];switch(r){case"quarter":a=1;break;case"eighth":a=2;break;case"eighthTriplet":a=3;break;case"sixteenth":a=4;break;case"sixteenthTriplet":a=6;break;default:throw new Error("Unrecognized noteLength "+r)}s=n*i+i/a,c=i/a,this.currentBeat=n,t.sequence.sources=[];for(var h=0;h<a;h++){var p=s+i/a*h,d=o()(t,{when:p});this.play(e,d),u.push(p)}return{noteTimes:u,noteDuration:c}},n.prototype.play=function(e,t){var i=this.context.createBufferSource(),n=this.getBufferByFilename(e),r=this.defaultPlayProperties,s=t.when||0;if(-1===n)throw new Error("Could not find "+e);t=o()({},r,t),t.sequence.sources.push(i),t.audible&&(i.buffer=n,i.connect(this.context.destination),i.start(s))},n.prototype.playDummySound=function(){if(!this.playedDummySound){var e=this.context.createBuffer(1,22050,44100),t=this.context.createBufferSource();t.buffer=e,t.connect(this.context.destination),t.start(0),this.playedDummySound=!0}};var c=new n({bpm:85,filenames:["downychirp.wav"]});c.loadTestSounds(),c.playDummySound()},94:function(e,t){},95:function(e,t){},97:function(e,t,i){function n(e){i(94)}var r=i(41)(i(46),i(98),n,"data-v-2d560100",null);e.exports=r.exports},98:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello"},[i("h1",[e._v(e._s(e.msg))]),e._v(" "),i("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),i("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("Core Docs")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("Forum")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://gitter.im/vuejs/vue",target:"_blank"}},[e._v("Gitter Chat")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("Twitter")])]),e._v(" "),i("br"),e._v(" "),i("li",[i("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("Docs for This Template")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[e._v("vue-router")])]),e._v(" "),i("li",[i("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[e._v("vuex")])]),e._v(" "),i("li",[i("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[e._v("vue-loader")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[e._v("awesome-vue")])])])}]}},99:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"app"}})},staticRenderFns:[]}}},[53]);
//# sourceMappingURL=app.37e35dc471380f48de59.js.map