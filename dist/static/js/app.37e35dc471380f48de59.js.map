{"version":3,"sources":["webpack:///static/js/app.37e35dc471380f48de59.js","webpack:///./src/geometry/vertices.js","webpack:///./src/eventbus.js","webpack:///./src/geometry/shape.js","webpack:///./src/util.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?35a7","webpack:///../playground/circle_detect/stroke_record3.js","webpack:///App.vue","webpack:///Hello.vue","webpack:///./src/animation/animator.js","webpack:///./src/audio/sequence.js","webpack:///./src/audio/sequenceset.js","webpack:///./src/audio/sequencesets.js","webpack:///./src/geometry/detector.js","webpack:///./src/interaction.js","webpack:///./src/main.js","webpack:///./src/world.js","webpack:///./src/audio/webaudio.js","webpack:///./src/components/Hello.vue?2a6f","webpack:///./src/components/Hello.vue?e10f","webpack:///./src/App.vue?a3de"],"names":["webpackJsonp","16","module","__webpack_exports__","__webpack_require__","Vertices","pts","this","points","pointsSansAnchor","anchorPoint","undefined","firstPoint","hull","area","signedArea","perimeter","centroid","perimeterEfficiency","hullAreaRatio","hullNRatio","addPoints","Point","x","y","index","d","prototype","constructor","i","length","addPoint","addPointsWithIndex","ap","point","push","pushFirstPoint","removeLastPoint","splice","copyPoints","arr","map","pt","arrayAdd","b","plus","arrayMinus","minus","_sortPointsByPolarAngle","self","sort","a","polarA","_findPolarAngle","polarB","deltaX","deltaY","angle","Math","atan2","reverse","_ccw","p0","p1","p2","cwAngle","ccwAngle","getHull","pointsLength","hullPoints","every","unshift","shift","filter","p","some","updateMost","updatePerimeter","updateArea","updatePerimeterEfficiency","updateCentroid","updateAll","updateHull","updateHullAreaRatio","updateHullNRatio","updateAllExceptHull","getCentroid","getPerimeter","getArea","abs","perim","getPerimeterEfficiency","x1","x2","y1","y2","xsq","pow","ysq","sqrt","sum","PI","xs","ys","Cx","Cy","x0","y0","B","getDistances","dist","getDistance","getPerpendicularDistance","v","w","sqr","dist2","l2","t","max","min","getConsecutiveDistances","D","getSlope","getLineEquationY","m","getLineEquationX","getXAlongLineAtY","getYAlongLineAtX","getAngle","p3","p12","p13","p23","A1","A2","A3","acos","isNearVertex","bounds","isNearVertices","M","doesIntersect","copy","2","EventBus","topics","topicMap","newShapeReady","endOfSequence","newSequenceSetCreated","newSequenceCreated","newActiveSequence","newEditedSequence","newActiveSequenceSet","newNoteTimesReady","eventBus","subscribe","topic","listener","id","method","publish","data","to","Error","forEach","26","Shape","vertices","identity","getCenter","Line","N","Circle","center","radius","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default","n","__WEBPACK_IMPORTED_MODULE_1__util_js__","__WEBPACK_IMPORTED_MODULE_2__vertices_js__","update","centerOn","coord","getVerticesNear","logicalKeep","isNearCenter","drawLine","canvas","doClear","ctx","getContext","clearRect","width","height","beginPath","moveTo","lineTo","stroke","drawDots","fillStyle","fillRect","verts","r","arc","3","Util","contains","val","unique","newArr","resample","factor","ceil","resampled","stp","findMin","ind","minimum","Infinity","findMax","maximum","cumulative","mean","combs","getCombinations","array","size","start","initialStuff","output","concat","randId","append","random","toString","substring","42","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Hello__","__WEBPACK_IMPORTED_MODULE_2__components_Hello___default","use","routes","path","name","component","43","exports","injectStyle","ssrContext","Component","44","sizeCanvas","window","innerWidth","innerHeight","__WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__","__WEBPACK_IMPORTED_MODULE_1__app_src_audio_webaudio_js__","__WEBPACK_IMPORTED_MODULE_2__app_src_audio_sequencesets_js__","__WEBPACK_IMPORTED_MODULE_3__app_src_world_js__","__WEBPACK_IMPORTED_MODULE_4__app_src_animation_animator_js__","__WEBPACK_IMPORTED_MODULE_5__app_src_interaction_js__","sequenceSetManager","filename","filenames","sequenceSet","createSet","document","createElement","animator","interaction","sequenceSetId","handleTouch","animate","createSequence","loop","body","appendChild","addEventListener","evt","keyCode","cancelLoop","45","Object","defineProperty","value","46","msg","47","Animator","world","shouldAnimate","isRecording","style","editedVertices","shape","pendingNotes","activeNotes","noteTimeTolerance","__WEBPACK_IMPORTED_MODULE_0__eventbus_js__","__WEBPACK_IMPORTED_MODULE_1__audio_webaudio_js__","newNoteTimesTopic","handleNewNoteTimes","bind","noteTimes","noteTime","noteDuration","loopIndex","editedShape","getEditedShape","updateActiveNotes","requestAnimationFrame","expired","note","currentTime","context","48","Sequence","__WEBPACK_IMPORTED_MODULE_2__util_js__","shouldLoop","isActive","nBeats","noteLength","currentBeat","__WEBPACK_IMPORTED_MODULE_0__webaudio_js__","getCurrentBeat","sources","__WEBPACK_IMPORTED_MODULE_1__eventbus_js__","topicName","registerShape","sequenceId","stop","newActiveSequenceTopic","looper","newNotesReadyTopic","schedule","schedulePlay","sequence","49","SequenceSet","sequences","activeSequenceIndex","activeSequenceId","__WEBPACK_IMPORTED_MODULE_3__sequence_js__","topicNextSequence","nextSequence","currentSequence","setId","50","SequenceSets","sequenceSets","__WEBPACK_IMPORTED_MODULE_1__sequenceset_js__","set","newSequenceSetTopicName","51","Detector","criteria","rectangle","axisRatioThreshold","circle","globalThreshold","triangle","line","distanceThreshold","perpDistanceThreshold","estimatedVertices","__WEBPACK_IMPORTED_MODULE_0__vertices_js__","__WEBPACK_IMPORTED_MODULE_1__shape_js__","updateEstimatedVertices","getEstimatedRectVertices","getEstimatedTriangleVertices","getEstimatedCircleVertices","getEstimatedLineVertices","inds","largestSet","A","C","tri","currentArea","topLeftFunc","topRightFunc","btmLeftFunc","btmRightFunc","topLeftPts","topRightPts","btmLeftPts","btmRightPts","nTopLeft","nTopRight","nBtmLeft","nBtmRight","topLeftDistances","topRightDistances","btmLeftDistances","btmRightDistances","topLeftInd","topRightInd","btmLeftInd","btmRightInd","distances","summed","getLikelihoodRect","getSlopeRatio","slopeA","slopeB","slopeAB","rectVertices","topLeftPt","topRightPt","btmLeftPt","btmRightPt","axis1Ratio","axis2Ratio","getLikelihoodCircle","vertPoints","nSamples","nHull","nRatio","realArea","hullArea","areaRatio","getLikelihoodTriangle","triangleVertices","getLikelihoodLine","pDistance","pFirst","pLast","perpDistanceRatios","lastDistance","distanceRatio","perpDistanceRatio","apply","getLikelihoodRandom","isRectangle","estimate","thresh","isCircle","isTriangle","isLine","estimates","perpRatio","distanceThresh","perpDistanceThresh","isRandom","getAdjustedRectVertices","rectPoints","rectVerts","L","midPoint","recombinedVerts","getAdjustedTriangleVertices","triPoints","meanDist","newVerts","getLine","getRectangle","getTriangle","getCircle","getRandom","getDetectedShape","identify","52","Interaction","__WEBPACK_IMPORTED_MODULE_0__util_js__","__WEBPACK_IMPORTED_MODULE_1__geometry_detector_js__","__WEBPACK_IMPORTED_MODULE_3__geometry_vertices_js__","__WEBPACK_IMPORTED_MODULE_4__eventbus_js__","__WEBPACK_IMPORTED_MODULE_5_interact_js__","__WEBPACK_IMPORTED_MODULE_5_interact_js___default","move","e","position","clientX","clientY","down","shouldContinue","sequenceIdOnDown","editedSequenceId","sequenceIdCurrent","record","nearbyVertices","publishNewShape","vertex","modifyVertex","modifyCenter","updateCurrentSequenceId","up","handleNewStroke","round","element","on","activeSequenceSetId","newShapeTopic","detector","53","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","54","World","shapes","activeSequenceIds","newShapeReadyTopic","newSequenceSetCreatedTopic","newSequenceCreatedTopic","newActiveSequenceSetTopic","registerSequenceSet","registerSequence","updateActiveSequence","updateActiveSequenceSet","updateEditedSequence","findActiveSequenceIdBySequenceSetId","isShapeWithSequenceId","findShapeBySequenceId","getShapesBySequenceSetId","getShapeBySequenceId","9","WebAudio","properties","bpm","interval","initContext","buffers","defaultPlayProperties","audible","pitch","validate","playedDummySound","webAudio","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","audioContext","AudioContext","webkitAudioContext","loadTestSounds","that","fullfile","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","send","loadSound","resolve","reject","onerror","err","loadSounds","promises","file","all","then","sounds","catch","console","log","getBufferByFilename","oneBuffer","totalElapsedTime","floor","props","scheduledTime","beatsToSchedule","duration","scheduledTimes","playTime","playProps","when","play","source","createBufferSource","connect","destination","playDummySound","createBuffer","94","95","97","98","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_m","staticRenderFns","attrs","href","target","99"],"mappings":"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","file":"static/js/app.37e35dc471380f48de59.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return Vertices; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Point; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_js__ = __webpack_require__(3);\n\n\n/*\n\tVERTICES\n*/\n\nfunction Vertices(pts) {\n\n\tthis.points = [];\n\tthis.pointsSansAnchor = [];\n\tthis.anchorPoint = undefined;\n\tthis.firstPoint = undefined;\n\tthis.hull = undefined;\n\tthis.area = undefined;\n\tthis.signedArea = undefined;\n\tthis.perimeter = undefined;\n\tthis.centroid = undefined;\n\tthis.perimeterEfficiency = undefined;\n\tthis.hullAreaRatio = 0;\n\tthis.hullNRatio = 0;\n\n\tif (pts !== undefined) {\n\t\tthis.addPoints(pts);\n\t}\n}\n\n/*\n\tINIT\n*/\n\nVertices.prototype.constructor = Vertices;\n\nVertices.prototype.addPoints = function (pts) {\n\tfor (var i = 0; i < pts.length; i++) {\n\t\tthis.addPoint(pts[i].x, pts[i].y, i);\n\t}\n};\n\nVertices.prototype.addPointsWithIndex = function (pts) {\n\tfor (var i = 0; i < pts.length; i++) {\n\t\tthis.addPoint(pts[i].x, pts[i].y, pts[i].index);\n\t}\n};\n\nVertices.prototype.addPoint = function (x, y, index) {\n\tvar ap = this.anchorPoint,\n\t    point = new Point(x, y, index);\n\n\tif (ap === undefined) {\n\t\tthis.anchorPoint = point;\n\t\tthis.firstPoint = point;\n\t\tthis.points.push(point);\n\t\treturn;\n\t} else if (ap.y > y && ap.x > x || ap.y === y && ap.x > x || ap.y > y && ap.x === x) {\n\t\tthis.pointsSansAnchor.push(ap);\n\t\tthis.anchorPoint = point;\n\t} else {\n\t\tthis.pointsSansAnchor.push(point);\n\t}\n\tthis.points.push(point);\n\tif (this.firstPoint.index > point.index) {\n\t\tthis.firstPoint = point;\n\t}\n};\n\n/*\n\tUTIL\n*/\n\nVertices.prototype.pushFirstPoint = function () {\n\tthis.points.push(this.points[0]);\n};\n\nVertices.prototype.removeLastPoint = function () {\n\tthis.points.splice(this.points.length - 1, 1);\n};\n\nVertices.prototype.copyPoints = function (arr) {\n\treturn arr.map(function (pt) {\n\t\treturn new Point(pt.x, pt.y, pt.index);\n\t});\n};\n\n/*\n\tOPERATIONS\n*/\n\nVertices.prototype.arrayAdd = function (points, b) {\n\tfor (var i = 0; i < points.length; i++) {\n\t\tpoints[i].plus(b);\n\t}\n};\n\nVertices.prototype.arrayMinus = function (points, b) {\n\tfor (var i = 0; i < points.length; i++) {\n\t\tpoints[i].minus(b);\n\t}\n};\n\n/*\n\tCONVEX HULL\n*/\n\nVertices.prototype._sortPointsByPolarAngle = function () {\n\tvar self = this;\n\n\treturn this.pointsSansAnchor.sort(function (a, b) {\n\t\tvar polarA = self._findPolarAngle(self.anchorPoint, a);\n\t\tvar polarB = self._findPolarAngle(self.anchorPoint, b);\n\n\t\tif (polarA < polarB) return -1;\n\t\tif (polarA > polarB) return 1;\n\t\treturn 0;\n\t});\n};\nVertices.prototype._findPolarAngle = function (a, b) {\n\tvar ONE_RADIAN = 57.295779513082;\n\tvar deltaX, deltaY;\n\n\tif (!a || !b) return 0;\n\n\tdeltaX = b.x - a.x;\n\tdeltaY = b.y - a.y;\n\n\tif (deltaX == 0 && deltaY == 0) return 0;\n\n\tvar angle = Math.atan2(deltaY, deltaX) * ONE_RADIAN;\n\n\tif (this.reverse) {\n\t\tif (angle <= 0) {\n\t\t\tangle += 360;\n\t\t}\n\t} else {\n\t\tif (angle >= 0) {\n\t\t\tangle += 360;\n\t\t}\n\t}\n\treturn angle;\n};\nVertices.prototype._ccw = function (p0, p1, p2) {\n\tvar difAngle;\n\tvar cwAngle = this._findPolarAngle(p0, p1);\n\tvar ccwAngle = this._findPolarAngle(p0, p2);\n\n\tif (cwAngle > ccwAngle) {\n\t\tdifAngle = cwAngle - ccwAngle;\n\t\treturn !(difAngle > 180);\n\t} else if (cwAngle < ccwAngle) {\n\t\tdifAngle = ccwAngle - cwAngle;\n\t\treturn difAngle > 180;\n\t}\n\treturn true;\n};\nVertices.prototype.getHull = function () {\n\tvar hullPoints = [],\n\t    points,\n\t    pointsLength;\n\n\tthis.reverse = this.pointsSansAnchor.every(function (point) {\n\t\treturn point.x < 0 && point.y < 0;\n\t});\n\n\tpoints = this._sortPointsByPolarAngle();\n\tpointsLength = points.length;\n\n\tif (pointsLength < 3) {\n\t\tpoints.unshift(this.anchorPoint);\n\t\treturn points;\n\t}\n\n\thullPoints.push(points.shift(), points.shift());\n\n\twhile (true) {\n\t\tvar p0, p1, p2;\n\n\t\thullPoints.push(points.shift());\n\n\t\tp0 = hullPoints[hullPoints.length - 3];\n\t\tp1 = hullPoints[hullPoints.length - 2];\n\t\tp2 = hullPoints[hullPoints.length - 1];\n\n\t\tif (this._ccw(p0, p1, p2)) {\n\t\t\thullPoints.splice(hullPoints.length - 2, 1);\n\t\t}\n\n\t\tif (points.length == 0) {\n\t\t\tif (pointsLength == hullPoints.length) {\n\t\t\t\tvar ap = this.anchorPoint;\n\t\t\t\thullPoints = hullPoints.filter(function (p) {\n\t\t\t\t\treturn !!p;\n\t\t\t\t});\n\t\t\t\tif (!hullPoints.some(function (p) {\n\t\t\t\t\treturn p.x == ap.x && p.y == ap.y;\n\t\t\t\t})) {\n\t\t\t\t\thullPoints.unshift(this.anchorPoint);\n\t\t\t\t}\n\t\t\t\treturn hullPoints;\n\t\t\t}\n\t\t\tpoints = hullPoints;\n\t\t\tpointsLength = points.length;\n\t\t\thullPoints = [];\n\t\t\thullPoints.push(points.shift(), points.shift());\n\t\t}\n\t}\n};\n\n/*\n\tUPDATES\n*/\n\nVertices.prototype.updateMost = function () {\n\tthis.updatePerimeter();\n\tthis.updateArea();\n\tthis.updatePerimeterEfficiency();\n\tthis.updateCentroid();\n};\n\nVertices.prototype.updateAll = function () {\n\tthis.updateMost();\n\tthis.updateHull();\n\tthis.updateHullAreaRatio();\n\tthis.updateHullNRatio();\n};\n\nVertices.prototype.updateAllExceptHull = function () {\n\tthis.updateMost();\n};\n\nVertices.prototype.updateHull = function () {\n\tvar hullPoints = this.getHull(),\n\t    hull = new Vertices();\n\thull.addPointsWithIndex(hullPoints);\n\thull.updateAllExceptHull();\n\thull.hull = hull;\n\tthis.hull = hull;\n};\n\nVertices.prototype.updateCentroid = function () {\n\tif (this.area === undefined) this.updateArea();\n\tthis.pushFirstPoint();\n\tthis.centroid = this.getCentroid(this.points, this.signedArea);\n\tthis.removeLastPoint();\n};\n\nVertices.prototype.updatePerimeter = function () {\n\tthis.pushFirstPoint();\n\tthis.perimeter = this.getPerimeter(this.points);\n\tthis.removeLastPoint();\n};\n\nVertices.prototype.updateArea = function () {\n\tthis.pushFirstPoint();\n\tvar area = this.getArea(this.points);\n\tthis.area = Math.abs(area);\n\tthis.signedArea = area;\n\tthis.removeLastPoint();\n};\n\nVertices.prototype.updatePerimeterEfficiency = function () {\n\tif (this.area === undefined || this.perimeter === undefined) {\n\t\tthis.updateArea();\n\t\tthis.updatePerimeter();\n\t}\n\tvar area = this.area,\n\t    perim = this.perimeter;\n\tthis.perimeterEfficiency = this.getPerimeterEfficiency(area, perim);\n};\n\nVertices.prototype.updateHullAreaRatio = function () {\n\tif (this.area === undefined || this.hull === undefined) return;\n\tthis.hullAreaRatio = this.hull.area / this.area;\n};\n\nVertices.prototype.updateHullNRatio = function () {\n\tif (this.hull === undefined) return;\n\tthis.hullNRatio = this.hull.points.length / this.points.length;\n};\n\n/*\n\tBASIC GEOMETRY\n*/\n\nVertices.prototype.getPerimeter = function (points) {\n\tvar perim = 0,\n\t    x1,\n\t    x2,\n\t    y1,\n\t    y2;\n\tfor (var i = 1; i < points.length; i++) {\n\t\tx1 = points[i - 1].x;\n\t\tx2 = points[i].x;\n\t\ty1 = points[i - 1].y;\n\t\ty2 = points[i].y;\n\t\tvar xsq = Math.pow(x2 - x1, 2),\n\t\t    ysq = Math.pow(y2 - y1, 2);\n\t\tperim += Math.sqrt(xsq + ysq);\n\t}\n\treturn perim;\n};\n\nVertices.prototype.getArea = function (points) {\n\tvar x1,\n\t    y1,\n\t    x2,\n\t    y2,\n\t    sum = 0;\n\tfor (var i = 0; i < points.length - 1; i++) {\n\t\tx1 = points[i].x;\n\t\tx2 = points[i + 1].x;\n\t\ty1 = points[i].y;\n\t\ty2 = points[i + 1].y;\n\t\tsum += x1 * y2 - y1 * x2;\n\t}\n\treturn sum / 2;\n};\n\nVertices.prototype.getPerimeterEfficiency = function (area, perim) {\n\treturn 2 * Math.sqrt(Math.PI * area) / perim;\n};\n\nVertices.prototype.getCentroid = function (points, area) {\n\tif (area === undefined) {\n\t\tarea = getArea(points);\n\t}\n\tvar xs = points.map(function (point) {\n\t\treturn point.x;\n\t}),\n\t    ys = points.map(function (point) {\n\t\treturn point.y;\n\t});\n\n\tvar Cx = 0,\n\t    Cy = 0;\n\n\tfor (var i = 0; i < xs.length - 1; i++) {\n\t\tvar x0 = xs[i],\n\t\t    x1 = xs[i + 1],\n\t\t    y0 = ys[i],\n\t\t    y1 = ys[i + 1],\n\t\t    B = x0 * y1 - x1 * y0;\n\t\tCx += (x0 + x1) * B;\n\t\tCy += (y0 + y1) * B;\n\t}\n\n\tCx /= 6 * area;\n\tCy /= 6 * area;\n\n\treturn new Point(Cx, Cy, 0);\n};\n\nVertices.prototype.getDistances = function (point, points) {\n\tvar dist = [];\n\tfor (var i = 0; i < points.length; i++) {\n\t\tdist.push(this.getDistance(point, points[i]));\n\t}\n\treturn dist;\n};\n\nVertices.prototype.getDistance = function (a, b) {\n\treturn Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n};\n\nVertices.prototype.getPerpendicularDistance = function (p, v, w) {\n\tfunction sqr(x) {\n\t\treturn x * x;\n\t}\n\tfunction dist2(v, w) {\n\t\treturn sqr(v.x - w.x) + sqr(v.y - w.y);\n\t}\n\tfunction distToSegmentSquared(p, v, w) {\n\t\tvar l2 = dist2(v, w);\n\t\tif (l2 == 0) return dist2(p, v);\n\t\tvar t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n\t\tt = Math.max(0, Math.min(1, t));\n\t\treturn dist2(p, { x: v.x + t * (w.x - v.x),\n\t\t\ty: v.y + t * (w.y - v.y) });\n\t}\n\treturn Math.sqrt(distToSegmentSquared(p, v, w));\n};\n\nVertices.prototype.getConsecutiveDistances = function (points) {\n\tvar D = [],\n\t    a,\n\t    b;\n\tfor (var i = 0; i < points.length - 1; i++) {\n\t\ta = points[i];\n\t\tb = points[i + 1];\n\t\tD.push(this.getDistance(a, b));\n\t}\n\treturn D;\n};\n\nVertices.prototype.getSlope = function (p1, p2) {\n\treturn (p2.y - p1.y) / (p2.x - p1.x);\n};\n\nVertices.prototype.getLineEquationY = function (p1, p2) {\n\tvar m = this.getSlope(p1, p2),\n\t    b = p2.y - m * p2.x,\n\t    func = function func(x) {\n\t\treturn m * x + b;\n\t};\n\treturn func;\n};\n\nVertices.prototype.getLineEquationX = function (p1, p2) {\n\tvar m = this.getSlope(p1, p2),\n\t    b = p2.y - m * p2.x,\n\t    func = function func(y) {\n\t\treturn (y - b) / m;\n\t};\n\treturn func;\n};\n\nVertices.prototype.getXAlongLineAtY = function (y, p1, p2) {\n\tvar func = this.getLineEquationX(p1, p2);\n\treturn func(y);\n};\n\nVertices.prototype.getYAlongLineAtX = function (x, p1, p2) {\n\tvar func = this.getLineEquationY(p1, p2);\n\treturn func(x);\n};\n\nVertices.prototype.getAngle = function (p1, p2, p3) {\n\tvar p12 = this.getDistance(p1, p2),\n\t    p13 = this.getDistance(p1, p3),\n\t    p23 = this.getDistance(p2, p3),\n\t    A1 = Math.pow(p12, 2),\n\t    A2 = Math.pow(p13, 2),\n\t    A3 = Math.pow(p23, 2);\n\treturn Math.acos((A1 + A2 - A3) / (2 * p12 * p13));\n};\n\n/*\n\tCONDITIONS\n*/\n\nVertices.prototype.isNearVertex = function (p1, p2, bounds) {\n\treturn this.getDistance(p1, p2) <= bounds;\n};\n\nVertices.prototype.isNearVertices = function (points, p2, bounds) {\n\tvar M = [];\n\tfor (var i = 0; i < points.length; i++) {\n\t\tM.push(this.isNearVertex(points[i], p2, bounds));\n\t}\n\treturn M;\n};\n\nVertices.prototype.doesIntersect = function (p1, p2, p3, bounds) {\n\tvar m = this.getSlope(p2, p3),\n\t    b = p2.y - m * p2.x,\n\t    y = m * p1.x + b;\n\treturn Math.abs(y - p1.y) <= bounds;\n};\n\n/*\n\tPOINT\n*/\n\nfunction Point(x, y, index) {\n\tthis.x = x;\n\tthis.y = y;\n\tthis.index = index;\n}\n\nPoint.prototype.constructor = Point;\n\nPoint.prototype.copy = function () {\n\treturn new Point(this.x, this.y, this.index);\n};\n\nPoint.prototype.minus = function (b) {\n\tif (b instanceof Point) {\n\t\tthis.x -= b.x;\n\t\tthis.y -= b.y;\n\t} else {\n\t\tthis.x -= b;\n\t\tthis.y -= b;\n\t}\n};\n\nPoint.prototype.plus = function (b) {\n\tif (b instanceof Point) {\n\t\tthis.x += b.x;\n\t\tthis.y += b.y;\n\t} else {\n\t\tthis.x += b;\n\t\tthis.y += b;\n\t}\n};\n\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return eventBus; });\n// http://dev.housetrip.com/2014/09/15/decoupling-javascript-apps-using-pub-sub-pattern/\n\nfunction EventBus() {\n\t\tthis.topics = {};\n\t\tthis.topicMap = {\n\t\t\t\tnewShapeReady: 'newShapeReady',\n\t\t\t\tendOfSequence: 'endOfSequence',\n\t\t\t\tnewSequenceSetCreated: 'newSequenceSetCreated',\n\t\t\t\tnewSequenceCreated: 'newSequenceCreated',\n\t\t\t\tnewActiveSequence: 'newActiveSequence',\n\t\t\t\tnewEditedSequence: 'newEditedSequence',\n\t\t\t\tnewActiveSequenceSet: 'newActiveSequenceSet',\n\t\t\t\tnewNoteTimesReady: 'newNoteTimesReady'\n\t\t};\n}\n\nEventBus.prototype.constructor = EventBus;\n\nEventBus.prototype.subscribe = function (topic, listener, id) {\n\t\tif (!this.topics[topic]) this.topics[topic] = [];\n\n\t\tthis.topics[topic].push({ method: listener, id: id });\n};\n\nEventBus.prototype.publish = function (topic, data, to) {\n\t\tif (!this.topics[topic]) {\n\t\t\t\tthrow new Error('No ' + topic + ' exists');\n\t\t}\n\t\tif (this.topics.length < 1) return;\n\t\tthis.topics[topic].forEach(function (listener) {\n\t\t\t\tif (typeof to == 'undefined') {\n\t\t\t\t\t\tlistener.method(data || {});\n\t\t\t\t} else {\n\t\t\t\t\t\tif (to === listener.id) {\n\t\t\t\t\t\t\t\tlistener.method(data || {});\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t});\n};\n\nvar eventBus = new EventBus();\n\n\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return Shape; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Line; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return Circle; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_js__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vertices_js__ = __webpack_require__(16);\n\n\n\n\n/*\n\tSHAPE -- Rectangle, Triangle, Random ...\n*/\n\nfunction Shape(vertices, identity) {\n\tthis.vertices = vertices;\n\tthis.points = vertices.points;\n\tthis.identity = identity;\n\tthis.getCenter();\n}\n\nShape.prototype.constructor = Shape;\n\nShape.prototype.update = function () {\n\tthis.vertices.updateAllExceptHull();\n\tthis.getCenter();\n};\n\nShape.prototype.getCenter = function () {\n\tthis.center = this.vertices.centroid;\n};\n\nShape.prototype.centerOn = function (pt) {\n\tpt.minus(this.center);\n\tthis.vertices.arrayAdd(this.points, pt);\n\tthis.update();\n};\n\nShape.prototype.isNearVertices = function (coord, bounds) {\n\treturn this.vertices.isNearVertices(this.points, coord, bounds);\n};\n\nShape.prototype.getVerticesNear = function (coord, bounds) {\n\tvar index = this.isNearVertices(coord, bounds);\n\treturn __WEBPACK_IMPORTED_MODULE_1__util_js__[\"a\" /* Util */].logicalKeep(this.points, index);\n};\n\nShape.prototype.isNearCenter = function (coord, bounds) {\n\treturn this.vertices.isNearVertices([this.center], coord, bounds)[0];\n};\n\n/*\n\tDISPLAY\n*/\n\nShape.prototype.drawLine = function (canvas, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t    points = this.vertices.copyPoints(this.points);\n\tpoints.push(points[0]);\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i = 0; i < points.length - 1; i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[i].x, points[i].y);\n\t\tctx.lineTo(points[i + 1].x, points[i + 1].y);\n\t\tctx.stroke();\n\t}\n};\n\nShape.prototype.drawDots = function (canvas, width, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t    points = this.vertices.copyPoints(this.points);\n\tpoints.push(this.center);\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i = 0; i < points.length; i++) {\n\t\tif (points[i].index === 0) {\n\t\t\t// ctx.fillStyle = 'red';\n\t\t\tctx.fillStyle = 'gray';\n\t\t} else if (points[i].index === 1) {\n\t\t\tctx.fillStyle = 'gray';\n\t\t} else {\n\t\t\tctx.fillStyle = 'gray';\n\t\t}\n\t\tvar x = points[i].x - width / 2;\n\t\tvar y = points[i].y - width / 2;\n\t\tctx.fillRect(x, y, width, width);\n\t}\n};\n\n/*\n\tLINE\n*/\n\nfunction Line(vertices) {\n\tvar N = vertices.points.length - 1;\n\tthis.vertices = vertices;\n\tthis.points = [vertices.points[0], vertices.points[N]];\n\tthis.identity = 'line';\n\tthis.getCenter();\n}\n\nLine.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Shape.prototype);\n\nLine.prototype.constructor = Line;\n\nLine.prototype.getCenter = function () {\n\tvar points = this.points,\n\t    verts = this.vertices,\n\t    x = (points[1].x - points[0].x) / 2 + points[0].x,\n\t    y = verts.getYAlongLineAtX(x, points[0], points[1]);\n\tthis.center = new __WEBPACK_IMPORTED_MODULE_2__vertices_js__[\"a\" /* Point */](x, y, 0);\n};\n\n/*\n\tCIRCLE\n*/\n\nfunction Circle(vertices, center, radius) {\n\tthis.vertices = vertices;\n\tthis.center = center;\n\tthis.radius = radius;\n\tthis.points = [center];\n\tthis.identity = 'circle';\n}\n\nCircle.prototype = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_create___default()(Shape.prototype);\n\nCircle.prototype.constructor = Circle;\n\nCircle.prototype.update = function () {\n\tthis.vertices.updateAllExceptHull();\n};\n\nCircle.prototype.drawLine = function (canvas, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t    point = this.points[0],\n\t    r = this.radius;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.beginPath();\n\tctx.arc(point.x, point.y, r, 0, Math.PI * 2);\n\tctx.stroke();\n};\n\n\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Util; });\nvar Util = {};\n\nUtil.contains = function (arr, val) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (arr[i] === val) return true;\n\t}\n\treturn false;\n};\n\nUtil.unique = function (arr) {\n\tvar newArr = [arr[0]];\n\tfor (var i = 1; i < arr.length; i++) {\n\t\tif (this.contains(newArr, arr[i])) continue;\n\t\tnewArr.push(arr[i]);\n\t}\n\treturn newArr;\n};\n\nUtil.resample = function (arr, N) {\n\tif (arr.length <= N) return arr;\n\tvar factor = Math.ceil(arr.length / N),\n\t    resampled = [],\n\t    stp = 0;\n\twhile (stp < arr.length) {\n\t\tresampled.push(arr[stp]);\n\t\tstp += factor;\n\t}\n\treturn resampled;\n};\n\nUtil.findMin = function (arr) {\n\tvar ind = -1,\n\t    minimum = Infinity;\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (arr[i] < minimum) {\n\t\t\tind = i;\n\t\t\tminimum = arr[i];\n\t\t}\n\t}\n\treturn ind;\n};\n\nUtil.findMax = function (arr) {\n\tvar ind = -1,\n\t    maximum = -Infinity;\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (arr[i] > maximum) {\n\t\t\tind = i;\n\t\t\tmaximum = arr[i];\n\t\t}\n\t}\n\treturn ind;\n};\n\nUtil.sum = function (arr) {\n\tvar cumulative = 0;\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tcumulative += arr[i];\n\t}\n\treturn cumulative;\n};\n\nUtil.mean = function (arr) {\n\treturn this.sum(arr) / arr.length;\n};\n\nUtil.combs = function (arr, N) {\n\tvar output = [];\n\tgetAllPossibleCombinations(arr, N, output);\n\treturn output;\n\tfunction getCombinations(array, size, start, initialStuff, output) {\n\t\tif (initialStuff.length >= size) {\n\t\t\toutput.push(initialStuff);\n\t\t} else {\n\t\t\tvar i;\n\t\t\tfor (i = start; i < array.length; ++i) {\n\t\t\t\tgetCombinations(array, size, i + 1, initialStuff.concat(array[i]), output);\n\t\t\t}\n\t\t}\n\t}\n\tfunction getAllPossibleCombinations(array, size, output) {\n\t\tgetCombinations(array, size, 0, [], output);\n\t}\n};\n\nUtil.logicalKeep = function (arr, ind) {\n\tvar newArr = [];\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tif (!ind[i]) continue;\n\t\tnewArr.push(arr[i]);\n\t}\n\treturn newArr;\n};\n\nUtil.randId = function (append) {\n\tvar id = Math.random().toString(36).substring(7);\n\tif (append == null) return id;\n\treturn append + id;\n};\n\n\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Hello__ = __webpack_require__(97);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Hello___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Hello__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Hello',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Hello___default.a\n  }]\n}));\n\n/***/ }),\n\n/***/ 43:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(95)\n}\nvar Component = __webpack_require__(41)(\n  /* script */\n  __webpack_require__(45),\n  /* template */\n  __webpack_require__(99),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_src_audio_webaudio_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_src_audio_sequencesets_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_src_world_js__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_src_animation_animator_js__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__app_src_interaction_js__ = __webpack_require__(52);\n\n\n\n\n\n\n\nvar sequenceSetManager = new __WEBPACK_IMPORTED_MODULE_2__app_src_audio_sequencesets_js__[\"a\" /* SequenceSets */](),\n\tfilename = __WEBPACK_IMPORTED_MODULE_1__app_src_audio_webaudio_js__[\"a\" /* webAudio */].filenames[0],\n\tsequenceSet = sequenceSetManager.createSet(filename),\n\tsequenceSet2 = sequenceSetManager.createSet(filename),\n\tcanvas = document.createElement('canvas'),\n\tctx = canvas.getContext('2d'),\n\tanimator = new __WEBPACK_IMPORTED_MODULE_4__app_src_animation_animator_js__[\"a\" /* Animator */](__WEBPACK_IMPORTED_MODULE_3__app_src_world_js__[\"a\" /* world */], canvas),\n\tinteraction = new __WEBPACK_IMPORTED_MODULE_5__app_src_interaction_js__[\"a\" /* Interaction */](__WEBPACK_IMPORTED_MODULE_3__app_src_world_js__[\"a\" /* world */], animator);\n\n__WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__[\"a\" /* eventBus */].publish(__WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__[\"a\" /* eventBus */].topicMap.newActiveSequenceSet, {sequenceSetId: sequenceSet.id});\n__WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__[\"a\" /* eventBus */].subscribe(__WEBPACK_IMPORTED_MODULE_0__app_src_eventbus_js__[\"a\" /* eventBus */].topicMap.newNoteTimesReady, function(data) {\n\t// console.log(data);\n});\n\nsizeCanvas();\n\ninteraction.handleTouch();\nanimator.animate();\n\nsequenceSet.createSequence(filename);\n// sequenceSet.createSequence(filename);\n\nsequenceSetManager.loop();\n\ndocument.body.appendChild(canvas);\n\nwindow.addEventListener('resize', sizeCanvas);\n\nwindow.addEventListener('keydown', function(evt) {\n\tif (evt.keyCode === 27) {\n\t\tsequenceSetManager.cancelLoop();\n\t} else if (evt.keyCode === 32) {\n\t\tsequenceSetManager.loop();\n\t}\n});\n\nfunction sizeCanvas() {\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n}\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'hello',\n  data: function data() {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    };\n  }\n});\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Animator; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__audio_webaudio_js__ = __webpack_require__(9);\n\n\n\nfunction Animator(world, canvas) {\n\tthis.world = world;\n\tthis.canvas = canvas;\n\tthis.shouldAnimate = true;\n\tthis.isRecording = false;\n\tthis.stroke = [];\n\tthis.style = {\n\t\teditedVertices: {\n\t\t\tshape: 'circle',\n\t\t\tsize: 30\n\t\t}\n\t};\n\tthis.pendingNotes = [];\n\tthis.activeNotes = [];\n\tthis.noteTimeTolerance = 1 / 60;\n\tthis.subscribe();\n}\n\nAnimator.prototype.subscribe = function () {\n\tvar newNoteTimesTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newNoteTimesReady;\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newNoteTimesTopic, this.handleNewNoteTimes.bind(this));\n};\n\nAnimator.prototype.handleNewNoteTimes = function (data) {\n\tfor (var i = 0; i < data.noteTimes.length; i++) {\n\t\tthis.pendingNotes.push({\n\t\t\tnoteTime: data.noteTimes[i],\n\t\t\tpoint: data.points[i],\n\t\t\tnoteDuration: data.noteDuration,\n\t\t\tloopIndex: data.loopIndex\n\t\t});\n\t}\n};\n\nAnimator.prototype.constructor = Animator;\n\nAnimator.prototype.animate = function () {\n\n\tif (!this.shouldAnimate) return;\n\n\tvar world = this.world,\n\t    canvas = this.canvas,\n\t    editedShape = world.getEditedShape();\n\n\tthis.updateActiveNotes();\n\n\tif (editedShape !== undefined && !this.isRecording) {\n\t\teditedShape.drawLine(canvas);\n\t\teditedShape.drawDots(canvas, 30, false);\n\t} else if (this.isRecording) {\n\t\tthis.drawLine(this.stroke);\n\t} else {\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t}\n\n\tfor (var i = 0; i < this.activeNotes.length; i++) {\n\t\tif (editedShape !== undefined) {\n\t\t\tthis.drawDots([this.activeNotes[i].point], 40, false);\n\t\t}\n\t}\n\n\twindow.requestAnimationFrame(this.animate.bind(this));\n};\n\nAnimator.prototype.updateActiveNotes = function () {\n\tvar pendingNotes = [],\n\t    expired = [];\n\tfor (var i = 0; i < this.pendingNotes.length; i++) {\n\t\tvar note = this.pendingNotes[i],\n\t\t    currentTime = __WEBPACK_IMPORTED_MODULE_1__audio_webaudio_js__[\"a\" /* webAudio */].context.currentTime,\n\t\t    noteTime = note.noteTime;\n\t\tif (Math.abs(noteTime - currentTime) < this.noteTimeTolerance) {\n\t\t\tthis.activeNotes.push(note);\n\t\t} else {\n\t\t\tpendingNotes.push(note);\n\t\t}\n\t}\n\tfor (var _i = 0; _i < this.activeNotes.length; _i++) {\n\t\tvar _note = this.activeNotes[_i],\n\t\t    _currentTime = __WEBPACK_IMPORTED_MODULE_1__audio_webaudio_js__[\"a\" /* webAudio */].context.currentTime,\n\t\t    _noteTime = _note.noteTime,\n\t\t    noteDuration = _note.noteDuration;\n\t\tif (_currentTime - (_noteTime + noteDuration) > this.noteTimeTolerance) {\n\t\t\texpired.push(_i - expired.length);\n\t\t}\n\t}\n\tfor (var _i2 = 0; _i2 < expired.length; _i2++) {\n\t\tthis.activeNotes.splice(expired[_i2], 1);\n\t}\n\tthis.pendingNotes = pendingNotes;\n\t// this.activeNotes = activeNotes;\n};\n\nAnimator.prototype.drawLine = function (points, doClear) {\n\tvar canvas = this.canvas,\n\t    ctx = canvas.getContext('2d');\n\tif (typeof doClear == 'undefined') doClear = true;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i = 0; i < points.length - 1; i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[i].x, points[i].y);\n\t\tctx.lineTo(points[i + 1].x, points[i + 1].y);\n\t\tctx.stroke();\n\t}\n};\n\nAnimator.prototype.drawDots = function (points, width, doClear) {\n\tvar canvas = this.canvas,\n\t    ctx = canvas.getContext('2d');\n\tif (typeof doClear == 'undefined') doClear = true;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i = 0; i < points.length; i++) {\n\t\tctx.fillStyle = 'gray';\n\t\tvar x = points[i].x - width / 2;\n\t\tvar y = points[i].y - width / 2;\n\t\tctx.fillRect(x, y, width, width);\n\t}\n};\n\n\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Sequence; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__webaudio_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util_js__ = __webpack_require__(3);\n\n\n\n\nfunction Sequence(sequenceSet, filename) {\n\tthis.sequenceSet = sequenceSet;\n\tthis.shape = undefined;\n\tthis.id = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].randId();\n\tthis.filename = filename;\n\tthis.shouldLoop = true;\n\tthis.isActive = false;\n\tthis.loopIndex = 0;\n\tthis.nBeats = 4;\n\tthis.noteLength = 'quarter';\n\tthis.currentBeat = __WEBPACK_IMPORTED_MODULE_0__webaudio_js__[\"a\" /* webAudio */].getCurrentBeat();\n\tthis.sources = [];\n\tthis.subscribe();\n}\n\nSequence.prototype.constructor = Sequence;\n\nSequence.prototype.subscribe = function () {\n\tvar topicName = __WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].topicMap.newShapeReady;\n\t__WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].subscribe(topicName, this.registerShape.bind(this), this.id);\n};\n\nSequence.prototype.registerShape = function (data) {\n\tvar id = data.sequenceId,\n\t    shape = data.shape;\n\tif (id !== this.id) return;\n\tif (shape === undefined) {\n\t\tthis.nBeats = 4;\n\t\tthis.noteLength = 'quarter';\n\t\tthis.shape = shape;\n\t\tfor (var i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sources[i].stop(0);\n\t\t}\n\t\treturn;\n\t}\n\tthis.shape = shape;\n\tswitch (shape.identity) {\n\t\tcase 'triangle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'eighthTriplet';\n\t\t\tbreak;\n\t\tcase 'rectangle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'quarter';\n\t\t\tbreak;\n\t\tcase 'circle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'sixteenth';\n\t\t\tbreak;\n\t\tcase 'line':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'eighth';\n\t\t\tbreak;\n\t\tcase 'random':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'sixteenthTriplet';\n\t\t\tbreak;\n\t}\n\t// this.loopIndex = 0;\n};\n\nSequence.prototype.loop = function () {\n\tvar self = this,\n\t    newActiveSequenceTopic = __WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].topicMap.newActiveSequence;\n\n\tthis.currentBeat = __WEBPACK_IMPORTED_MODULE_0__webaudio_js__[\"a\" /* webAudio */].getCurrentBeat();\n\tthis.shouldLoop = true;\n\tthis.loopIndex = 0;\n\n\t//\tmark that a new active sequence has begun\n\n\t__WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].publish(newActiveSequenceTopic, {\n\t\tsequenceId: this.id,\n\t\tsequenceSetId: this.sequenceSet.id\n\t});\n\n\tvar looper = function looper() {\n\n\t\tif (!self.shouldLoop) return;\n\n\t\tvar currentBeat = __WEBPACK_IMPORTED_MODULE_0__webaudio_js__[\"a\" /* webAudio */].getCurrentBeat(),\n\t\t    nBeats = self.nBeats,\n\t\t    loopIndex = self.loopIndex,\n\t\t    filename = self.filename,\n\t\t    noteLength = self.noteLength,\n\t\t    shape = self.shape,\n\t\t    points = void 0,\n\t\t    newNotesReadyTopic = __WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].topicMap.newNoteTimesReady;\n\n\t\tif (shape !== undefined) {\n\t\t\t// points = shape.vertices.copyPoints(shape.points)\n\t\t\tpoints = shape.points;\n\t\t\tif (shape.identity === 'rectangle') {\n\t\t\t\tpoints = [points[loopIndex]];\n\t\t\t}\n\t\t}\n\n\t\t//\tunless we've reached the next beat, do not proceed\n\n\t\tif (currentBeat === self.currentBeat) {\n\t\t\twindow.requestAnimationFrame(looper);\n\t\t\treturn;\n\t\t}\n\n\t\t//\tOnly calculate properties if we're the active sequence\n\n\t\t// if (this.isActive) {\n\n\t\t// }\n\n\t\t//\totherwise, schedule the appropriate number of notes associated with the\n\t\t//\tcurrent beat, and return the scheduled note times\n\n\t\tif (shape !== undefined) {\n\t\t\tvar schedule = __WEBPACK_IMPORTED_MODULE_0__webaudio_js__[\"a\" /* webAudio */].schedulePlay(filename, { noteLength: noteLength, sequence: self }),\n\t\t\t    currentTime = __WEBPACK_IMPORTED_MODULE_0__webaudio_js__[\"a\" /* webAudio */].context.currentTime;\n\t\t\t//\tmark self new note times are available\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].publish(newNotesReadyTopic, {\n\t\t\t\tsequenceId: self.id,\n\t\t\t\tsequenceSetId: self.sequenceSet.id,\n\t\t\t\tnoteTimes: schedule.noteTimes,\n\t\t\t\tnoteDuration: schedule.noteDuration,\n\t\t\t\tcurrentTime: currentTime,\n\t\t\t\tloopIndex: loopIndex,\n\t\t\t\tshape: shape,\n\t\t\t\tpoints: points\n\t\t\t});\n\t\t}\n\n\t\t//\tmark the updated currentBeat\n\n\t\tself.currentBeat = currentBeat;\n\n\t\t//\tif we're on the last beat of the sequence,\n\t\t//\tquit out of the looping function, and alert the parent\n\t\t//\tself it should move to the next sequence\n\n\t\tif (loopIndex === nBeats - 1) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__eventbus_js__[\"a\" /* eventBus */].publish('endOfSequence', {}, self.sequenceSet.id);\n\t\t\treturn;\n\t\t}\n\n\t\t//\totherwise, proceed to the next beat\n\n\t\tself.loopIndex++;\n\n\t\twindow.requestAnimationFrame(looper);\n\t};\n\n\tlooper();\n};\n\n\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SequenceSet; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__webaudio_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util_js__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__sequence_js__ = __webpack_require__(48);\n\n\n\n\n\nfunction SequenceSet() {\n\tthis.sequences = [];\n\tthis.activeSequenceIndex = undefined;\n\tthis.activeSequenceId = undefined;\n\tthis.id = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].randId();\n\tthis.subscribe();\n}\n\nSequenceSet.prototype.constructor = SequenceSet;\n\nSequenceSet.prototype.subscribe = function () {\n\tvar topicNextSequence = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.endOfSequence;\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(topicNextSequence, this.nextSequence.bind(this), this.id);\n};\n\nSequenceSet.prototype.cancelLoop = function () {\n\tif (this.sequences.length === 0) return;\n\tthis.sequences[this.activeSequenceIndex].shouldLoop = false;\n};\n\nSequenceSet.prototype.loop = function () {\n\tif (this.sequences.length === 0) return;\n\tvar currentSequence = this.sequences[this.activeSequenceIndex];\n\tthis.activeSequenceId = currentSequence.id;\n\tcurrentSequence.loop();\n};\n\nSequenceSet.prototype.nextSequence = function () {\n\tif (this.activeSequenceIndex === this.sequences.length - 1) {\n\t\tthis.activeSequenceIndex = 0;\n\t} else {\n\t\tthis.activeSequenceIndex++;\n\t}\n\tthis.loop();\n};\n\nSequenceSet.prototype.createSequence = function (filename) {\n\tvar sequence = new __WEBPACK_IMPORTED_MODULE_3__sequence_js__[\"a\" /* Sequence */](this, filename),\n\t    setId = this.id;\n\tthis.sequences.push(sequence);\n\tif (this.sequences.length === 1) {\n\t\tthis.activeSequenceIndex = 0;\n\t\tthis.activeSequenceId = sequence.id;\n\t}\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].publish(__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newSequenceCreated, {\n\t\tsequenceId: sequence.id,\n\t\tsequenceSetId: setId\n\t});\n};\n\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SequenceSets; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sequenceset_js__ = __webpack_require__(49);\n\n\n\nfunction SequenceSets() {\n\tthis.sequenceSets = [];\n}\n\nSequenceSets.prototype.constructor = SequenceSets;\n\nSequenceSets.prototype.createSet = function (filename) {\n\tvar set = new __WEBPACK_IMPORTED_MODULE_1__sequenceset_js__[\"a\" /* SequenceSet */](filename),\n\t    newSequenceSetTopicName = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newSequenceSetCreated;\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].publish(newSequenceSetTopicName, { sequenceSetId: set.id });\n\tthis.sequenceSets.push(set);\n\treturn set;\n};\n\nSequenceSets.prototype.loop = function () {\n\tfor (var i = 0; i < this.sequenceSets.length; i++) {\n\t\tthis.sequenceSets[i].loop();\n\t}\n};\n\nSequenceSets.prototype.cancelLoop = function () {\n\tfor (var i = 0; i < this.sequenceSets.length; i++) {\n\t\tthis.sequenceSets[i].cancelLoop();\n\t}\n};\n\n\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Detector; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vertices_js__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shape_js__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util_js__ = __webpack_require__(3);\n\n\n\n\nfunction Detector(vertices) {\n\tthis.vertices = vertices;\n\tthis.criteria = {\n\t\trectangle: {\n\t\t\taxisRatioThreshold: .5\n\t\t},\n\t\tcircle: {\n\t\t\tglobalThreshold: .5\n\t\t},\n\t\ttriangle: {\n\t\t\tglobalThreshold: 10\n\t\t},\n\t\tline: {\n\t\t\tdistanceThreshold: .4,\n\t\t\tperpDistanceThreshold: .05\n\t\t},\n\t\trandom: {\n\t\t\tglobalThreshold: .5\n\t\t}\n\t};\n\tthis.estimatedVertices = {\n\t\trectangle: [],\n\t\tcircle: [],\n\t\ttriangle: [],\n\t\tline: []\n\t};\n\tthis.identity = undefined;\n}\n\nDetector.prototype.constructor = Detector;\n\n/*\n\tUPDATE ESTIMATED VERTICES\n*/\n\nDetector.prototype.updateEstimatedVertices = function () {\n\tthis.estimatedVertices.rectangle = this.getEstimatedRectVertices();\n\tthis.estimatedVertices.triangle = this.getEstimatedTriangleVertices();\n\tthis.estimatedVertices.circle = this.getEstimatedCircleVertices();\n\tthis.estimatedVertices.line = this.getEstimatedLineVertices();\n};\n\n/*\n\tESTIMATE VERTICES\n*/\n\nDetector.prototype.getEstimatedTriangleVertices = function () {\n\tvar verts = this.vertices.hull,\n\t    points = verts.points,\n\t    inds = [];\n\tfor (var i = 0; i < points.length; i++) {\n\t\tinds.push(i);\n\t}var area = -Infinity,\n\t    largestSet;\n\tinds = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].combs(inds, 3);\n\tfor (var i = 0; i < inds.length; i++) {\n\t\tvar set = inds[i],\n\t\t    A = points[set[0]],\n\t\t    B = points[set[1]],\n\t\t    C = points[set[2]],\n\t\t    tri = [A, B, C],\n\t\t    currentArea = Math.abs(verts.getArea(tri));\n\t\tif (currentArea > area) {\n\t\t\tlargestSet = [A, B, C];\n\t\t\tarea = currentArea;\n\t\t}\n\t}\n\treturn largestSet;\n};\n\nDetector.prototype.getEstimatedRectVertices = function () {\n\n\tvar verts = this.vertices.hull,\n\t    points = verts.points,\n\t    centroid = verts.centroid,\n\t    topLeftPts = points.filter(topLeftFunc),\n\t    topRightPts = points.filter(topRightFunc),\n\t    btmLeftPts = points.filter(btmLeftFunc),\n\t    btmRightPts = points.filter(btmRightFunc),\n\t    nTopLeft = topLeftPts.length,\n\t    nTopRight = topRightPts.length,\n\t    nBtmLeft = btmLeftPts.length,\n\t    nBtmRight = btmRightPts.length;\n\n\tif (nTopLeft === 0 || nTopRight === 0 || nBtmLeft === 0 || nBtmRight === 0) {\n\t\treturn [];\n\t}\n\n\tvar topLeftDistances = verts.getDistances(centroid, topLeftPts),\n\t    topRightDistances = verts.getDistances(centroid, topRightPts),\n\t    btmLeftDistances = verts.getDistances(centroid, btmLeftPts),\n\t    btmRightDistances = verts.getDistances(centroid, btmRightPts);\n\n\tvar topLeftInd = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].findMax(topLeftDistances),\n\t    topRightInd = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].findMax(topRightDistances),\n\t    btmLeftInd = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].findMax(btmLeftDistances),\n\t    btmRightInd = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].findMax(btmRightDistances);\n\n\tvar topLeftPt = topLeftPts[topLeftInd],\n\t    topRightPt = topRightPts[topRightInd],\n\t    btmLeftPt = btmLeftPts[btmLeftInd],\n\t    btmRightPt = btmRightPts[btmRightInd];\n\n\treturn [topLeftPt, topRightPt, btmLeftPt, btmRightPt];\n\n\tfunction topLeftFunc(pt) {\n\t\treturn pt.x < centroid.x && pt.y > centroid.y;\n\t}\n\tfunction topRightFunc(pt) {\n\t\treturn pt.x > centroid.x && pt.y > centroid.y;\n\t}\n\tfunction btmLeftFunc(pt) {\n\t\treturn pt.x < centroid.x && pt.y < centroid.y;\n\t}\n\tfunction btmRightFunc(pt) {\n\t\treturn pt.x > centroid.x && pt.y < centroid.y;\n\t}\n};\n\nDetector.prototype.getEstimatedCircleVertices = function () {\n\tvar verts = this.vertices,\n\t    points = verts.hull.points,\n\t    centroid = verts.hull.centroid,\n\t    distances = verts.getDistances(centroid, points),\n\t    summed = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].sum(distances),\n\t    N = distances.length,\n\t    mean = summed / N;\n\n\tvar radius = new __WEBPACK_IMPORTED_MODULE_0__vertices_js__[\"a\" /* Point */](centroid.x, centroid.y + mean, 0);\n\n\treturn [centroid, radius];\n};\n\nDetector.prototype.getEstimatedLineVertices = function () {\n\tvar N = this.vertices.points.length;\n\treturn [this.vertices.points[0], this.vertices.points[N - 1]];\n};\n\n/*\n\tASSESS SHAPE LIKELIHOOD\n*/\n\nDetector.prototype.getLikelihoodRect = function () {\n\tvar rectVertices = this.estimatedVertices.rectangle;\n\n\tif (rectVertices.length === 0) return 0;\n\n\tvar hull = this.vertices.hull,\n\t    topLeftPt = rectVertices[0],\n\t    topRightPt = rectVertices[1],\n\t    btmLeftPt = rectVertices[2],\n\t    btmRightPt = rectVertices[3],\n\t    centroid = hull.centroid;\n\n\tvar axis1Ratio = getSlopeRatio(topLeftPt, btmRightPt, centroid),\n\t    axis2Ratio = getSlopeRatio(btmLeftPt, topRightPt, centroid),\n\t    threshold = this.criteria.rectangle.axisRatioThreshold;\n\n\treturn Math.max(axis1Ratio, axis2Ratio);\n\n\tfunction getSlopeRatio(p0, p1, centroid) {\n\t\tvar slopeA = hull.getSlope(p0, centroid),\n\t\t    slopeB = hull.getSlope(p1, centroid),\n\t\t    slopeAB = hull.getSlope(p0, p1),\n\t\t    ratio = slopeA / slopeAB * (slopeB / slopeAB);\n\t\treturn ratio;\n\t}\n};\n\nDetector.prototype.getLikelihoodCircle = function () {\n\tvar verts = this.vertices,\n\t    hull = verts.hull,\n\t    vertPoints = verts.points,\n\t    hullPoints = hull.points,\n\t    nSamples = vertPoints.length,\n\t    nHull = hullPoints.length,\n\t    nRatio = nHull / nSamples,\n\t    realArea = verts.area,\n\t    hullArea = hull.area,\n\t    areaRatio = realArea / hullArea,\n\t    perimEfficiency = verts.perimeterEfficiency,\n\t    confidence = perimEfficiency * nRatio * areaRatio;\n\n\treturn confidence;\n};\n\nDetector.prototype.getLikelihoodTriangle = function () {\n\tvar triangleVertices = this.estimatedVertices.triangle,\n\t    area = this.vertices.hull.area;\n\tif (triangleVertices === undefined) return Infinity;\n\treturn area / Math.abs(this.vertices.getArea(triangleVertices));\n};\n\nDetector.prototype.getLikelihoodLine = function () {\n\tvar verts = this.vertices,\n\t    points = verts.points,\n\t    pFirst = points[0],\n\t    pLast = points[points.length - 1],\n\t    perpDistanceRatios = [],\n\t    distances = [],\n\t    lastDistance = verts.getDistance(pFirst, pLast),\n\t    pDistance;\n\tfor (var i = 1; i < points.length - 2; i++) {\n\t\tpDistance = verts.getPerpendicularDistance(points[i], pFirst, pLast);\n\t\tperpDistanceRatios.push(pDistance / lastDistance);\n\t}\n\tfor (var i = 0; i < points.length - 2; i++) {\n\t\tdistances.push(verts.getDistance(points[i], points[i + 1]));\n\t}\n\tvar summed = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].sum(distances),\n\t    distRatio = lastDistance / summed,\n\t    maxPerpRatio = Math.max.apply(Math, perpDistanceRatios);\n\n\treturn {\n\t\tdistanceRatio: distRatio,\n\t\tperpDistanceRatio: maxPerpRatio\n\t};\n};\n\nDetector.prototype.getLikelihoodRandom = function () {\n\treturn this.vertices.perimeterEfficiency;\n};\n\n/*\n\tASSIGN SHAPE IDENTITY\n*/\n\nDetector.prototype.isRectangle = function () {\n\tvar estimate = this.getLikelihoodRect(),\n\t    thresh = this.criteria.rectangle.axisRatioThreshold;\n\treturn Math.abs(estimate - 1) < thresh;\n};\n\nDetector.prototype.isCircle = function () {\n\tvar estimate = this.getLikelihoodCircle(),\n\t    thresh = this.criteria.circle.globalThreshold;\n\treturn estimate > thresh;\n};\n\nDetector.prototype.isTriangle = function () {\n\tvar estimate = this.getLikelihoodTriangle(),\n\t    thresh = this.criteria.triangle.globalThreshold;\n\treturn estimate < thresh;\n};\n\nDetector.prototype.isLine = function () {\n\tvar estimates = this.getLikelihoodLine(),\n\t    distanceRatio = estimates.distanceRatio,\n\t    perpRatio = estimates.perpDistanceRatio,\n\t    distanceThresh = this.criteria.line.distanceThreshold,\n\t    perpDistanceThresh = this.criteria.line.perpDistanceThreshold;\n\n\treturn distanceRatio - 1 < distanceThresh && perpRatio < perpDistanceThresh;\n};\n\nDetector.prototype.isRandom = function () {\n\tvar estimate = this.getLikelihoodRandom(),\n\t    thresh = this.criteria.random.globalThreshold;\n\n\treturn estimate < thresh;\n};\n\n/*\n\tMODIFY VERTICES\n*/\n\nDetector.prototype.getAdjustedRectVertices = function () {\n\tvar rectPoints = this.estimatedVertices.rectangle,\n\t    rectVerts = new __WEBPACK_IMPORTED_MODULE_0__vertices_js__[\"b\" /* Vertices */](rectPoints),\n\t    points = rectVerts._sortPointsByPolarAngle();\n\tpoints.unshift(rectVerts.anchorPoint);\n\trectVerts.points = points;\n\trectVerts.updateAllExceptHull();\n\tpoints.push(points[0]);\n\tvar distances = rectVerts.getConsecutiveDistances(points),\n\t    L = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].mean(distances),\n\t    centroid = rectVerts.centroid,\n\t    midPoint = new __WEBPACK_IMPORTED_MODULE_0__vertices_js__[\"a\" /* Point */](L / 2, L / 2, 0),\n\t    A = centroid.copy(),\n\t    B = centroid.copy(),\n\t    C = centroid.copy(),\n\t    D = centroid.copy();\n\n\tA.minus(midPoint);\n\tB.x -= midPoint.x;\n\tB.y += midPoint.y;\n\tC.plus(midPoint);\n\tD.x += midPoint.x;\n\tD.y -= midPoint.y;\n\n\tvar recombinedVerts = new __WEBPACK_IMPORTED_MODULE_0__vertices_js__[\"b\" /* Vertices */]([A, B, C, D]);\n\trecombinedVerts.updateAll();\n\treturn recombinedVerts;\n};\n\nDetector.prototype.getAdjustedTriangleVertices = function () {\n\tvar verts = this.vertices,\n\t    triPoints = this.estimatedVertices.triangle,\n\t    centroid = verts.hull.centroid,\n\t    distances = verts.getDistances(centroid, triPoints),\n\t    meanDist = __WEBPACK_IMPORTED_MODULE_2__util_js__[\"a\" /* Util */].mean(distances) * .9,\n\t    newVerts = [];\n\n\tfor (var i = 0; i < 3; i++) {\n\t\tvar center = centroid.copy();\n\t\tif (i === 0) {\n\t\t\tcenter.y -= meanDist;\n\t\t} else if (i === 1) {\n\t\t\tcenter.y += meanDist;\n\t\t\tcenter.x -= meanDist;\n\t\t} else {\n\t\t\tcenter.y += meanDist;\n\t\t\tcenter.x += meanDist;\n\t\t}\n\t\tnewVerts.push(center);\n\t}\n\tvar vertices = new __WEBPACK_IMPORTED_MODULE_0__vertices_js__[\"b\" /* Vertices */](newVerts);\n\tvertices.updateAll();\n\treturn vertices;\n};\n\n/*\n\tGET DETECTED SHAPE\n*/\n\nDetector.prototype.getLine = function () {\n\treturn new __WEBPACK_IMPORTED_MODULE_1__shape_js__[\"a\" /* Line */](this.vertices);\n};\n\nDetector.prototype.getRectangle = function () {\n\tvar verts = this.getAdjustedRectVertices();\n\treturn new __WEBPACK_IMPORTED_MODULE_1__shape_js__[\"b\" /* Shape */](verts, 'rectangle');\n};\n\nDetector.prototype.getTriangle = function () {\n\tvar verts = this.getAdjustedTriangleVertices();\n\treturn new __WEBPACK_IMPORTED_MODULE_1__shape_js__[\"b\" /* Shape */](verts, 'triangle');\n};\n\nDetector.prototype.getCircle = function () {\n\tvar verts = this.vertices,\n\t    estimatedVertices = this.estimatedVertices.circle,\n\t    center = estimatedVertices[0],\n\t    radius = estimatedVertices[1].y - center.y;\n\treturn new __WEBPACK_IMPORTED_MODULE_1__shape_js__[\"c\" /* Circle */](verts, center, radius);\n};\n\nDetector.prototype.getRandom = function () {\n\treturn new __WEBPACK_IMPORTED_MODULE_1__shape_js__[\"b\" /* Shape */](this.vertices, 'random');\n};\n\nDetector.prototype.getDetectedShape = function () {\n\tswitch (this.identity) {\n\t\tcase 'line':\n\t\t\treturn this.getLine();\n\t\tcase 'rectangle':\n\t\t\treturn this.getRectangle();\n\t\tcase 'circle':\n\t\t\treturn this.getCircle();\n\t\tcase 'triangle':\n\t\t\treturn this.getTriangle();\n\t\tcase 'random':\n\t\t\treturn this.getRandom();\n\t\tdefault:\n\t\t\treturn this.getRandom();\n\t}\n};\n\n/*\n\tIDENTIFY\n*/\n\nDetector.prototype.identify = function () {\n\tvar isRectangle = this.isRectangle(),\n\t    isCircle = this.isCircle(),\n\t    isTriangle = this.isTriangle(),\n\t    isLine = this.isLine(),\n\t    isRandom = this.isRandom(),\n\t    identity;\n\n\tif (isLine) {\n\t\tidentity = 'line';\n\t} else if (isRandom) {\n\t\tidentity = 'random';\n\t} else if (isCircle) {\n\t\tidentity = 'circle';\n\t} else if (isRectangle) {\n\t\tidentity = 'rectangle';\n\t} else if (isTriangle) {\n\t\tidentity = 'triangle';\n\t} else {\n\t\tidentity = undefined;\n\t}\n\n\tthis.identity = identity;\n};\n\n\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Interaction; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util_js__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__geometry_detector_js__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__geometry_shape_js__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__geometry_vertices_js__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__eventbus_js__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_interact_js__ = __webpack_require__(96);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_interact_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_interact_js__);\n\n\n\n\n\n\n\nfunction Interaction(world, animator) {\n\tthis.world = world;\n\tthis.animator = animator;\n}\n\nInteraction.prototype.constructor = Interaction;\n\nInteraction.prototype.handleTouch = function () {\n\n\tvar self = this,\n\t    position = void 0,\n\t    stroke = [],\n\t    shouldContinue = true,\n\t    shape = void 0,\n\t    vertex = void 0,\n\t    animator = this.animator,\n\t    element = animator.canvas,\n\t    sequenceIdCurrent = void 0,\n\t    sequenceIdOnDown = void 0,\n\t    bounds = animator.style.editedVertices.size;\n\n\tanimator.isRecording = false;\n\n\t__WEBPACK_IMPORTED_MODULE_5_interact_js___default()(element).on('down', down).on('up', up).on('move', move);\n\n\tfunction move(e) {\n\t\tposition = { x: e.clientX, y: e.clientY };\n\t}\n\tfunction down(e) {\n\t\tshouldContinue = true;\n\t\tshape = self.world.getEditedShape();\n\t\tsequenceIdOnDown = self.world.editedSequenceId;\n\t\tsequenceIdCurrent = sequenceIdOnDown;\n\t\t//\twe're making a new shape\n\t\tif (shape === undefined) {\n\t\t\tanimator.isRecording = true;\n\t\t\trequestAnimationFrame(record);\n\t\t\treturn;\n\t\t}\n\t\tvar nearbyVertices = shape.getVerticesNear(position, bounds),\n\t\t    isNearCenter = shape.isNearCenter(position, bounds);\n\t\tif (nearbyVertices.length === 0 && !isNearCenter) {\n\t\t\tself.publishNewShape(undefined);\n\t\t\tanimator.isRecording = true;\n\t\t\trequestAnimationFrame(record);\n\t\t\treturn;\n\t\t}\n\t\tanimator.isRecording = false;\n\t\tif (nearbyVertices.length > 0) {\n\t\t\tvertex = nearbyVertices[0];\n\t\t\trequestAnimationFrame(modifyVertex);\n\t\t} else {\n\t\t\trequestAnimationFrame(modifyCenter);\n\t\t}\n\t}\n\tfunction updateCurrentSequenceId() {\n\t\tsequenceIdCurrent = self.world.editedSequenceId;\n\t}\n\tfunction up() {\n\t\tshouldContinue = false;\n\t\tupdateCurrentSequenceId();\n\t\tif (!animator.isRecording) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tanimator.isRecording = false;\n\t\tself.handleNewStroke(stroke);\n\t\tstroke = [];\n\t\tanimator.stroke = [];\n\t}\n\tfunction record() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tstroke.push(position);\n\t\tanimator.stroke = stroke;\n\t\trequestAnimationFrame(record);\n\t}\n\tfunction modifyVertex() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tvertex.x = Math.round(position.x);\n\t\tvertex.y = Math.round(position.y);\n\t\tshape.update();\n\t\trequestAnimationFrame(modifyVertex);\n\t}\n\tfunction modifyCenter() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tvar pt = new __WEBPACK_IMPORTED_MODULE_3__geometry_vertices_js__[\"a\" /* Point */](position.x, position.y, 0);\n\t\tshape.centerOn(pt);\n\t\tshape.update();\n\t\trequestAnimationFrame(modifyCenter);\n\t}\n};\n\nInteraction.prototype.publishNewShape = function (shape) {\n\tvar sequenceId = this.world.editedSequenceId,\n\t    sequenceSetId = this.world.activeSequenceSetId,\n\t    newShapeTopic = __WEBPACK_IMPORTED_MODULE_4__eventbus_js__[\"a\" /* eventBus */].topicMap.newShapeReady;\n\t__WEBPACK_IMPORTED_MODULE_4__eventbus_js__[\"a\" /* eventBus */].publish(newShapeTopic, { shape: shape, sequenceId: sequenceId, sequenceSetId: sequenceSetId });\n};\n\nInteraction.prototype.handleNewStroke = function (stroke) {\n\tstroke = __WEBPACK_IMPORTED_MODULE_0__util_js__[\"a\" /* Util */].unique(__WEBPACK_IMPORTED_MODULE_0__util_js__[\"a\" /* Util */].resample(stroke, 256));\n\tvar verts = new __WEBPACK_IMPORTED_MODULE_3__geometry_vertices_js__[\"b\" /* Vertices */](stroke);\n\tverts.updateAll();\n\tvar detector = new __WEBPACK_IMPORTED_MODULE_1__geometry_detector_js__[\"a\" /* Detector */](verts);\n\tdetector.updateEstimatedVertices();\n\tdetector.identify();\n\tvar shape = detector.getDetectedShape();\n\tthis.publishNewShape(shape);\n\t// \tsequenceId = this.world.editedSequenceId,\n\t// \tsequenceSetId = this.world.activeSequenceSetId,\n\t// \tnewShapeTopic = eventBus.topicMap.newShapeReady;\n\t// eventBus.publish(newShapeTopic, {shape, sequenceId, sequenceSetId});\n};\n\n\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__playground_circle_detect_stroke_record3_js__ = __webpack_require__(44);\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return world; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__eventbus_js__ = __webpack_require__(2);\n\n\nfunction World() {\n\tthis.shapes = [];\n\tthis.subscribe();\n\tthis.editedSequenceId = undefined;\n\tthis.activeSequenceIds = [];\n\tthis.activeSequenceSetId = undefined;\n}\n\nWorld.prototype.constructor = World;\n\nWorld.prototype.subscribe = function () {\n\tvar newShapeReadyTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newShapeReady,\n\t    newSequenceSetCreatedTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newSequenceSetCreated,\n\t    newSequenceCreatedTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newSequenceCreated,\n\t    newActiveSequenceTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newActiveSequence,\n\t    newActiveSequenceSetTopic = __WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].topicMap.newActiveSequenceSet;\n\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newSequenceSetCreatedTopic, this.registerSequenceSet.bind(this));\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newSequenceCreatedTopic, this.registerSequence.bind(this));\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newShapeReadyTopic, this.registerShape.bind(this));\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newActiveSequenceTopic, this.updateActiveSequence.bind(this));\n\t__WEBPACK_IMPORTED_MODULE_0__eventbus_js__[\"a\" /* eventBus */].subscribe(newActiveSequenceSetTopic, this.updateActiveSequenceSet.bind(this));\n};\n\nWorld.prototype.updateEditedSequence = function () {\n\tvar index = this.findActiveSequenceIdBySequenceSetId(this.activeSequenceSetId);\n\tthis.editedSequenceId = this.activeSequenceIds[index].sequenceId;\n};\n\nWorld.prototype.updateActiveSequence = function (data) {\n\tvar sequenceSetId = data.sequenceSetId,\n\t    setId = data.sequenceId,\n\t    index = this.findActiveSequenceIdBySequenceSetId(sequenceSetId);\n\tthis.activeSequenceIds[index].sequenceId = setId;\n\tthis.updateEditedSequence();\n};\n\nWorld.prototype.updateActiveSequenceSet = function (data) {\n\tthis.activeSequenceSetId = data.sequenceSetId;\n\tthis.updateEditedSequence();\n};\n\nWorld.prototype.registerSequenceSet = function (data) {\n\tthis.activeSequenceIds.push({\n\t\tsequenceSetId: data.sequenceSetId,\n\t\tsequenceId: undefined\n\t});\n};\n\nWorld.prototype.registerSequence = function (data) {\n\tdata.shape = undefined;\n\tthis.registerShape(data);\n};\n\nWorld.prototype.registerShape = function (data) {\n\tvar shape = data.shape,\n\t    sequenceId = data.sequenceId,\n\t    sequenceSetId = data.sequenceSetId;\n\tif (this.isShapeWithSequenceId(sequenceId)) {\n\t\tvar ind = this.findShapeBySequenceId(sequenceId);\n\t\tthis.shapes[ind].shape = shape;\n\t} else {\n\t\tthis.shapes.push({\n\t\t\tshape: shape,\n\t\t\tsequenceId: sequenceId,\n\t\t\tsequenceSetId: sequenceSetId\n\t\t});\n\t}\n};\n\nWorld.prototype.findActiveSequenceIdBySequenceSetId = function (id) {\n\tfor (var i = 0; i < this.activeSequenceIds.length; i++) {\n\t\tif (this.activeSequenceIds[i].sequenceSetId === id) return i;\n\t}\n\treturn -1;\n};\n\nWorld.prototype.getShapesBySequenceSetId = function (id) {\n\treturn this.shapes.filter(function (shape) {\n\t\treturn shape.sequenceSetId === id;\n\t}).shape;\n};\n\nWorld.prototype.getShapeBySequenceId = function (id) {\n\tvar ind = this.findShapeBySequenceId(id);\n\tif (ind === -1) return undefined;\n\treturn this.shapes[ind].shape;\n};\n\nWorld.prototype.getEditedShape = function () {\n\treturn this.getShapeBySequenceId(this.editedSequenceId);\n};\n\nWorld.prototype.findShapeBySequenceId = function (id) {\n\tfor (var i = 0; i < this.shapes.length; i++) {\n\t\tif (this.shapes[i].sequenceId === id) return i;\n\t}\n\treturn -1;\n};\n\nWorld.prototype.isShapeWithSequenceId = function (id) {\n\treturn this.findShapeBySequenceId(id) !== -1;\n};\n\nvar world = new World();\n\n\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return webAudio; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util_js__ = __webpack_require__(3);\n\n\n\n\n/*\n\tconstructor\n*/\n\nfunction WebAudio(properties) {\n\tthis.bpm = properties.bpm;\n\n\tthis.interval = 60 / this.bpm;\n\n\tthis.currentBeat = 1;\n\n\t//\tinitialize the AudioContext, or return -1\n\t//\tif initialization fails\n\n\tthis.context = this.initContext();\n\n\t//\tarray of buffer objects with <buffer> and <filename>\n\t//\tproperties\n\n\tthis.buffers = [];\n\tthis.filenames = properties.filenames;\n\n\t//\tdefine default playing properties\n\n\tthis.defaultPlayProperties = {\n\t\taudible: true,\n\t\tpitch: { min: 0, max: 0 }\n\n\t\t//\tmake sure the object was instantiated correctly\n\n\t};this.validate();\n\n\t//\tfor proper safari playback\n\n\tthis.playedDummySound = false;\n}\n\n/*\n\tprototype\n*/\n\nWebAudio.prototype.constructor = WebAudio;\n\n//\tinitialize the audio context, or return -1 if init fails\n\nWebAudio.prototype.initContext = function () {\n\tvar audioContext = window.AudioContext || window.webkitAudioContext || -1;\n\tif (audioContext === -1) return audioContext;\n\treturn new audioContext();\n};\n\n//\tmake sure we can properly instantiate a new WebAudio\n\nWebAudio.prototype.validate = function () {\n\t//\tmake sure we have window.requestAnimationFrame\n\tif (typeof window.requestAnimationFrame == 'undefined') {\n\t\tthrow new Error('requestAnimationFrame is not supported in this browser');\n\t}\n\t//\tmake sure the audio context is valid\n\tif (this.context === -1) {\n\t\tthrow new Error('Web audio is not supported in this browser');\n\t}\n};\n\nWebAudio.prototype.loadTestSounds = function () {\n\tvar filenames = this.filenames,\n\t    that = this,\n\t    buffers = this.buffers;\n\tfilenames.map(function (name) {\n\t\tvar fullfile = 'https://dl.dropboxusercontent.com/s/mt0s5oj4tx1lre2/' + name,\n\t\t    request = new XMLHttpRequest();\n\t\trequest.open('GET', fullfile, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onload = function () {\n\t\t\tthat.context.decodeAudioData(request.response, function (buffer) {\n\t\t\t\tbuffers.push({\n\t\t\t\t\tfilename: name,\n\t\t\t\t\tbuffer: buffer\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t\trequest.send();\n\t});\n};\n\nWebAudio.prototype.loadSound = function (filename) {\n\n\t//\treturn a promise to load the given <filename>\n\n\tvar that = this;\n\n\treturn new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n\t\tvar request = new XMLHttpRequest(),\n\t\t    fullfile = '/sounds/' + filename;\n\n\t\trequest.open('GET', fullfile);\n\t\trequest.responseType = 'arraybuffer';\n\n\t\trequest.onload = function () {\n\t\t\tthat.context.decodeAudioData(request.response, function (buffer) {\n\t\t\t\tresolve(buffer);\n\t\t\t});\n\t\t};\n\n\t\trequest.onerror = function (err) {\n\t\t\treject(err);\n\t\t};\n\n\t\trequest.send();\n\t});\n};\n\nWebAudio.prototype.loadSounds = function () {\n\n\t//\tgiven the array of stored filenames in <this>,\n\t//\tresolve each promise to load the corresponding buffer, and\n\t//\tpush each buffer to the <buffers> array in <this>\n\n\tvar promises = [],\n\t    buffers = this.buffers,\n\t    filenames = this.filenames,\n\t    that = this;\n\n\tfilenames.map(function (file) {\n\t\tpromises.push(that.loadSound(file));\n\t});\n\n\tvar promise = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(promises).then(function (sounds) {\n\t\tfor (var i = 0; i < sounds.length; i++) {\n\t\t\tbuffers.push({\n\t\t\t\tfilename: filenames[i],\n\t\t\t\tbuffer: sounds[i]\n\t\t\t});\n\t\t}\n\t}).catch(function (err) {\n\t\tconsole.log('An error occurred while loading sounds');\n\t});\n\n\treturn promise;\n};\n\n//\tfrom the array of buffer objects in this.buffers,\n//\treturn the buffer that matches <filename>\n\nWebAudio.prototype.getBufferByFilename = function (filename) {\n\tvar oneBuffer = this.buffers.filter(function (buffer) {\n\t\treturn buffer.filename === filename;\n\t});\n\tif (oneBuffer.length === 0) return -1;\n\tif (oneBuffer.length > 1) {\n\t\tthrow new Error('More than one buffer found for' + filename);\n\t}\n\treturn oneBuffer[0].buffer;\n};\n\nWebAudio.prototype.getCurrentBeat = function () {\n\tvar totalElapsedTime = this.context.currentTime,\n\t    interval = this.interval;\n\treturn Math.floor(totalElapsedTime / interval);\n};\n\n//\tschedule the playing of N number of notes, where N corresponds\n//\tto the note length specified in <props.noteLength>\n\nWebAudio.prototype.schedulePlay = function (filename, props) {\n\tvar interval = this.interval,\n\t    currentBeat = this.getCurrentBeat(),\n\t    noteLength = props.noteLength,\n\t    scheduledTime = void 0,\n\t    beatsToSchedule = void 0,\n\t    duration = void 0,\n\t    scheduledTimes = [];\n\n\tswitch (noteLength) {\n\t\tcase 'quarter':\n\t\t\tbeatsToSchedule = 1;\n\t\t\tbreak;\n\t\tcase 'eighth':\n\t\t\tbeatsToSchedule = 2;\n\t\t\tbreak;\n\t\tcase 'eighthTriplet':\n\t\t\tbeatsToSchedule = 3;\n\t\t\tbreak;\n\t\tcase 'sixteenth':\n\t\t\tbeatsToSchedule = 4;\n\t\t\tbreak;\n\t\tcase 'sixteenthTriplet':\n\t\t\tbeatsToSchedule = 6;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Unrecognized noteLength ' + noteLength);\n\t}\n\n\t//\tfirst scheduled time\n\n\tscheduledTime = currentBeat * interval + interval / beatsToSchedule;\n\n\t//\tnote length\n\n\tduration = interval / beatsToSchedule;\n\n\t//\tupdate the current beat\n\n\tthis.currentBeat = currentBeat;\n\n\tprops.sequence.sources = [];\n\n\tfor (var i = 0; i < beatsToSchedule; i++) {\n\t\tvar playTime = scheduledTime + interval / beatsToSchedule * i,\n\t\t    playProps = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(props, { when: playTime });\n\n\t\t//\tplay each note at time <playTime>\n\n\t\tthis.play(filename, playProps);\n\n\t\t//\tfor output\n\n\t\tscheduledTimes.push(playTime);\n\t}\n\n\treturn { noteTimes: scheduledTimes, noteDuration: duration };\n};\n\nWebAudio.prototype.play = function (filename, props) {\n\tvar source = this.context.createBufferSource(),\n\t    buffer = this.getBufferByFilename(filename),\n\t    defaultPlayProperties = this.defaultPlayProperties,\n\t    when = props.when || 0;\n\n\tif (buffer === -1) throw new Error('Could not find ' + filename);\n\n\tprops = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({}, defaultPlayProperties, props);\n\n\tprops.sequence.sources.push(source);\n\n\t//\tif this set of beats is set to be silent, return\n\n\tif (!props.audible) return;\n\n\tsource.buffer = buffer;\n\tsource.connect(this.context.destination);\n\tsource.start(when);\n};\n\nWebAudio.prototype.playDummySound = function () {\n\tif (this.playedDummySound) return;\n\n\tvar buffer = this.context.createBuffer(1, 22050, 44100),\n\t    source = this.context.createBufferSource();\n\n\tsource.buffer = buffer;\n\tsource.connect(this.context.destination);\n\tsource.start(0);\n\n\tthis.playedDummySound = true;\n};\n\n/*\n\tinstantiate\n*/\n\nvar webAudio = new WebAudio({\n\tbpm: 85, filenames: ['downychirp.wav']\n});\nwebAudio.loadTestSounds();\nwebAudio.playDummySound();\n\n// const webAudio = new WebAudio({\n// \tbpm: 85, filenames: ['808_hi.mp3', 'perc_kick.mp3', 'piano_g.mp3', 'celeste_g.mp3']\n// })\n\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 95:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(94)\n}\nvar Component = __webpack_require__(41)(\n  /* script */\n  __webpack_require__(46),\n  /* template */\n  __webpack_require__(98),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2d560100\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"hello\"\n  }, [_c('h1', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('h2', [_vm._v(\"Essential Links\")]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), _c('h2', [_vm._v(\"Ecosystem\")]), _vm._v(\" \"), _vm._m(1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://vuejs.org\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Core Docs\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://forum.vuejs.org\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Forum\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://gitter.im/vuejs/vue\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Gitter Chat\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://twitter.com/vuejs\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Twitter\")])]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vuejs-templates.github.io/webpack/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Docs for This Template\")])])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://router.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vue-router\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vuex.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vuex\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vue-loader.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vue-loader\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://github.com/vuejs/awesome-vue\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"awesome-vue\")])])])\n}]}\n\n/***/ }),\n\n/***/ 99:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ })\n\n},[53]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.37e35dc471380f48de59.js","import { Util } from '../util.js';\n\n/*\n\tVERTICES\n*/\n\nfunction Vertices(pts) {\n\n\tthis.points = [];\n\tthis.pointsSansAnchor = [];\n\tthis.anchorPoint = undefined;\n\tthis.firstPoint = undefined;\n\tthis.hull = undefined;\n\tthis.area = undefined;\n\tthis.signedArea = undefined;\n\tthis.perimeter = undefined;\n\tthis.centroid = undefined;\n\tthis.perimeterEfficiency = undefined;\n\tthis.hullAreaRatio = 0;\n\tthis.hullNRatio = 0;\n\n\tif (pts !== undefined) {\n\t\tthis.addPoints(pts);\n\t}\n}\n\n/*\n\tINIT\n*/\n\nVertices.prototype.constructor = Vertices;\n\nVertices.prototype.addPoints = function(pts) {\n\tfor (var i=0; i<pts.length; i++) {\n\t\tthis.addPoint(pts[i].x, pts[i].y, i);\n\t}\n}\n\nVertices.prototype.addPointsWithIndex = function(pts) {\n\tfor (var i=0; i<pts.length; i++) {\n\t\tthis.addPoint(pts[i].x, pts[i].y, pts[i].index);\n\t}\n}\n\nVertices.prototype.addPoint = function(x, y, index) {\n\tvar ap = this.anchorPoint,\n\t\tpoint = new Point(x, y, index);\n\n    if (ap === undefined) {\n        this.anchorPoint = point;\n        this.firstPoint = point;\n        this.points.push(point);\n        return;\n    } else if (\n        (ap.y > y && ap.x > x) ||\n        (ap.y === y && ap.x > x) ||\n        (ap.y > y && ap.x === x)\n    ) {\n        this.pointsSansAnchor.push(ap);\n        this.anchorPoint = point;\n    } else {\n    \tthis.pointsSansAnchor.push(point);\n    }\n\tthis.points.push(point);\n\tif (this.firstPoint.index > point.index) {\n\t\tthis.firstPoint = point;\n\t}\n};\n\n/*\n\tUTIL\n*/\n\nVertices.prototype.pushFirstPoint = function() {\n\tthis.points.push(this.points[0]);\n}\n\nVertices.prototype.removeLastPoint = function() {\n\tthis.points.splice(this.points.length-1, 1);\n}\n\nVertices.prototype.copyPoints = function(arr) {\n\treturn arr.map(function(pt) {\n\t\treturn new Point(pt.x, pt.y, pt.index);\n\t});\n}\n\n/*\n\tOPERATIONS\n*/\n\nVertices.prototype.arrayAdd = function(points, b) {\n\tfor (var i=0; i<points.length; i++) {\n\t\tpoints[i].plus(b);\n\t}\n}\n\nVertices.prototype.arrayMinus = function(points, b) {\n\tfor (var i=0; i<points.length; i++) {\n\t\tpoints[i].minus(b);\n\t}\n}\n\n/*\n\tCONVEX HULL\n*/\n\nVertices.prototype._sortPointsByPolarAngle = function() {\n    var self = this;\n\n    return this.pointsSansAnchor.sort(function(a, b) {\n        var polarA = self._findPolarAngle(self.anchorPoint, a);\n        var polarB = self._findPolarAngle(self.anchorPoint, b);\n\n        if (polarA < polarB) return -1;\n        if (polarA > polarB) return 1;\n        return 0;\n    });\n}\nVertices.prototype._findPolarAngle = function(a, b) {\n    var ONE_RADIAN = 57.295779513082;\n    var deltaX, deltaY;\n\n    if (!a || !b) return 0;\n\n    deltaX = (b.x - a.x);\n    deltaY = (b.y - a.y);\n\n    if (deltaX == 0 && deltaY == 0) return 0;\n\n    var angle = Math.atan2(deltaY, deltaX) * ONE_RADIAN;\n\n    if (this.reverse) {\n        if (angle <= 0) {\n            angle += 360;\n        }\n    } else {\n        if (angle >= 0) {\n            angle += 360;\n        }\n    }\n    return angle;\n}\nVertices.prototype._ccw = function(p0, p1, p2) {\n    var difAngle;\n    var cwAngle = this._findPolarAngle(p0, p1);\n    var ccwAngle = this._findPolarAngle(p0, p2);\n\n    if (cwAngle > ccwAngle) {\n        difAngle = cwAngle - ccwAngle;\n        return !(difAngle > 180);\n    } else if (cwAngle < ccwAngle) {\n        difAngle = ccwAngle - cwAngle;\n        return (difAngle > 180);\n    }\n    return true;\n}\nVertices.prototype.getHull = function() {\n    var hullPoints = [],\n        points,\n        pointsLength;\n\n    this.reverse = this.pointsSansAnchor.every(function(point){\n        return (point.x < 0 && point.y < 0);\n    });\n\n    points = this._sortPointsByPolarAngle();\n    pointsLength = points.length;\n\n    if (pointsLength < 3) {\n        points.unshift(this.anchorPoint);\n        return points;\n    }\n\n    hullPoints.push(points.shift(), points.shift());\n\n    while (true) {\n        var p0,\n            p1,\n            p2;\n\n        hullPoints.push(points.shift());\n\n        p0 = hullPoints[hullPoints.length - 3];\n        p1 = hullPoints[hullPoints.length - 2];\n        p2 = hullPoints[hullPoints.length - 1];\n\n        if (this._ccw(p0, p1, p2)) {\n            hullPoints.splice(hullPoints.length - 2, 1);\n        }\n\n        if (points.length == 0) {\n            if (pointsLength == hullPoints.length) {\n                var ap = this.anchorPoint;\n                hullPoints = hullPoints.filter(function(p) { return !!p; });\n                if (!hullPoints.some(function(p){\n                        return(p.x == ap.x && p.y == ap.y);\n                    })) {\n                    hullPoints.unshift(this.anchorPoint);\n                }\n                return hullPoints;\n            }\n            points = hullPoints;\n            pointsLength = points.length;\n            hullPoints = [];\n            hullPoints.push(points.shift(), points.shift());\n        }\n    }\n}\n\n/*\n\tUPDATES\n*/\n\nVertices.prototype.updateMost = function() {\n\tthis.updatePerimeter();\n\tthis.updateArea();\n\tthis.updatePerimeterEfficiency();\n\tthis.updateCentroid();\n}\n\nVertices.prototype.updateAll = function() {\n\tthis.updateMost();\n\tthis.updateHull();\n\tthis.updateHullAreaRatio();\n\tthis.updateHullNRatio();\n}\n\nVertices.prototype.updateAllExceptHull = function() {\n\tthis.updateMost();\n}\n\nVertices.prototype.updateHull = function() {\n\tvar hullPoints = this.getHull(),\n\t\thull = new Vertices();\n\thull.addPointsWithIndex(hullPoints);\n\thull.updateAllExceptHull();\n\thull.hull = hull;\n\tthis.hull = hull;\n}\n\nVertices.prototype.updateCentroid = function() {\n\tif (this.area === undefined) this.updateArea();\n\tthis.pushFirstPoint();\n\tthis.centroid = this.getCentroid(this.points, this.signedArea);\n\tthis.removeLastPoint();\n}\n\nVertices.prototype.updatePerimeter = function() {\n\tthis.pushFirstPoint();\n\tthis.perimeter = this.getPerimeter(this.points);\n\tthis.removeLastPoint();\n}\n\nVertices.prototype.updateArea = function() {\n\tthis.pushFirstPoint();\n\tvar area = this.getArea(this.points);\n\tthis.area = Math.abs(area);\n\tthis.signedArea = area;\n\tthis.removeLastPoint();\n}\n\nVertices.prototype.updatePerimeterEfficiency = function() {\n\tif (this.area === undefined || this.perimeter === undefined) {\n\t\tthis.updateArea();\n\t\tthis.updatePerimeter();\n\t}\n\tvar\tarea = this.area,\n\t\tperim = this.perimeter;\n\tthis.perimeterEfficiency = this.getPerimeterEfficiency(area, perim);\n}\n\nVertices.prototype.updateHullAreaRatio = function() {\n\tif (this.area === undefined || this.hull === undefined) return;\n\tthis.hullAreaRatio = this.hull.area / this.area;\n}\n\nVertices.prototype.updateHullNRatio = function() {\n\tif (this.hull === undefined) return;\n\tthis.hullNRatio = this.hull.points.length / this.points.length\n}\n\n/*\n\tBASIC GEOMETRY\n*/\n\nVertices.prototype.getPerimeter = function(points) {\n\tvar perim = 0,\n\t\tx1, x2, y1, y2;\n\tfor (var i=1; i<points.length; i++) {\n\t\tx1 = points[i-1].x;\n\t\tx2 = points[i].x;\n\t\ty1 = points[i-1].y;\n\t\ty2 = points[i].y;\n\t\tvar xsq = Math.pow(x2-x1, 2),\n\t\t\tysq = Math.pow(y2-y1, 2);\n\t\tperim += Math.sqrt(xsq + ysq);\n\t}\n\treturn perim\n}\n\nVertices.prototype.getArea = function(points) {\n\tvar x1, y1, x2, y2, sum = 0;\n\tfor (var i=0; i<points.length-1; i++) {\n\t\tx1 = points[i].x;\n\t\tx2 = points[i+1].x;\n\t\ty1 = points[i].y;\n\t\ty2 = points[i+1].y;\n\t\tsum += (x1*y2) - (y1*x2);\n\t}\n\treturn sum/2\n}\n\nVertices.prototype.getPerimeterEfficiency = function(area, perim) {\n\treturn (2*Math.sqrt(Math.PI*area))/perim\n}\n\nVertices.prototype.getCentroid = function(points, area) {\n\tif (area === undefined) {\n\t\tarea = getArea(points);\n\t}\n\tvar xs = points.map(function(point) { return point.x }),\n\t\tys = points.map(function(point) { return point.y });\n\n\tvar Cx = 0, \n\t\tCy = 0;\n\n\tfor (var i = 0; i<xs.length-1; i++) {\n\t\tvar x0 = xs[i],\n\t\t\tx1 = xs[i+1],\n\t\t\ty0 = ys[i],\n\t\t\ty1 = ys[i+1],\n\t\t\tB = (x0*y1 - x1*y0);\n\t\tCx += (x0+x1) * B;\n\t\tCy += (y0+y1) * B;\n\t}\n\n\tCx /= (6*area);\n\tCy /= (6*area);\n\n\treturn new Point(Cx, Cy, 0);\n}\n\nVertices.prototype.getDistances = function(point, points) {\n\tvar dist = [];\n\tfor (var i=0; i<points.length; i++) {\n\t\tdist.push(this.getDistance(point, points[i]));\n\t}\n\treturn dist;\n}\n\nVertices.prototype.getDistance = function(a, b) {\n\treturn Math.sqrt(Math.pow(b.x-a.x, 2) + Math.pow(b.y-a.y, 2));\n}\n\nVertices.prototype.getPerpendicularDistance = function(p, v, w) {\n\tfunction sqr(x) { return x * x }\n\tfunction dist2(v, w) { return sqr(v.x - w.x) + sqr(v.y - w.y) }\n\tfunction distToSegmentSquared(p, v, w) {\n\t  var l2 = dist2(v, w);\n\t  if (l2 == 0) return dist2(p, v);\n\t  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n\t  t = Math.max(0, Math.min(1, t));\n\t  return dist2(p, { x: v.x + t * (w.x - v.x),\n\t                    y: v.y + t * (w.y - v.y) });\n\t}\n\treturn Math.sqrt(distToSegmentSquared(p, v, w));\n}\n\nVertices.prototype.getConsecutiveDistances = function(points) {\n\tvar D = [], a, b;\n\tfor (var i=0; i<points.length-1; i++) {\n\t\ta = points[i];\n\t\tb = points[i+1];\n\t\tD.push(this.getDistance(a, b));\n\t}\n\treturn D;\n}\n\nVertices.prototype.getSlope = function(p1, p2) {\n\treturn (p2.y - p1.y) / (p2.x - p1.x);\n}\n\nVertices.prototype.getLineEquationY = function(p1, p2) {\n\tvar m = this.getSlope(p1, p2),\n\t\tb = p2.y - (m * p2.x),\n\t\tfunc = function(x) { return m * x + b; };\n\treturn func;\n}\n\nVertices.prototype.getLineEquationX = function(p1, p2) {\n\tvar m = this.getSlope(p1, p2),\n\t\tb = p2.y - (m * p2.x),\n\t\tfunc = function(y) { return (y - b)/m; };\n\treturn func;\n}\n\nVertices.prototype.getXAlongLineAtY = function(y, p1, p2) {\n\tvar func = this.getLineEquationX(p1, p2);\n\treturn func(y);\n}\n\nVertices.prototype.getYAlongLineAtX = function(x, p1, p2) {\n\tvar func = this.getLineEquationY(p1, p2);\n\treturn func(x);\n}\n\nVertices.prototype.getAngle = function(p1, p2, p3) {\n\tvar p12 = this.getDistance(p1, p2),\n\t\tp13 = this.getDistance(p1, p3),\n\t\tp23 = this.getDistance(p2, p3),\n\t\tA1 = Math.pow(p12, 2),\n\t\tA2 = Math.pow(p13, 2),\n\t\tA3 = Math.pow(p23, 2);\n\treturn Math.acos((A1 + A2 - A3) / (2 * p12 * p13));\n}\n\n/*\n\tCONDITIONS\n*/\n\nVertices.prototype.isNearVertex = function(p1, p2, bounds) {\n\treturn this.getDistance(p1, p2) <= bounds;\n}\n\nVertices.prototype.isNearVertices = function(points, p2, bounds) {\n\tvar M = [];\n\tfor (var i=0; i<points.length; i++) {\n\t\tM.push(this.isNearVertex(points[i], p2, bounds));\n\t}\n\treturn M;\n}\n\nVertices.prototype.doesIntersect = function(p1, p2, p3, bounds) {\n\tvar m = this.getSlope(p2, p3),\n\t\tb = p2.y - (m * p2.x),\n\t\ty = m * p1.x + b;\n\treturn Math.abs(y-p1.y) <= bounds;\n}\n\n/*\n\tPOINT\n*/\n\nfunction Point(x, y, index) {\n\tthis.x = x;\n\tthis.y = y;\n\tthis.index = index;\n}\n\nPoint.prototype.constructor = Point;\n\nPoint.prototype.copy = function() {\n\treturn new Point(this.x, this.y, this.index);\n}\n\nPoint.prototype.minus = function(b) {\n\tif (b instanceof Point) {\n\t\tthis.x -= b.x;\n\t\tthis.y -= b.y;\n\t} else {\n\t\tthis.x -= b;\n\t\tthis.y -= b;\n\t}\n}\n\nPoint.prototype.plus = function(b) {\n\tif (b instanceof Point) {\n\t\tthis.x += b.x;\n\t\tthis.y += b.y;\n\t} else {\n\t\tthis.x += b;\n\t\tthis.y += b;\n\t}\n}\n\nexport { Vertices, Point }\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/vertices.js","// http://dev.housetrip.com/2014/09/15/decoupling-javascript-apps-using-pub-sub-pattern/\n\nfunction EventBus() {\n\tthis.topics = {}\n\tthis.topicMap = {\n\t\tnewShapeReady: 'newShapeReady',\n\t\tendOfSequence: 'endOfSequence',\n\t\tnewSequenceSetCreated: 'newSequenceSetCreated',\n\t\tnewSequenceCreated: 'newSequenceCreated',\n\t\tnewActiveSequence: 'newActiveSequence',\n\t\tnewEditedSequence: 'newEditedSequence',\n\t\tnewActiveSequenceSet: 'newActiveSequenceSet',\n\t\tnewNoteTimesReady: 'newNoteTimesReady'\n\t}\n}\n\nEventBus.prototype.constructor = EventBus\n\nEventBus.prototype.subscribe = function(topic, listener, id) {\n  \tif (!this.topics[topic]) this.topics[topic] = [];\n\n  \tthis.topics[topic].push( { method: listener, id } )\n}\n\nEventBus.prototype.publish = function(topic, data, to) {\n  \tif (!this.topics[topic]) {\n\t\tthrow new Error(`No ${topic} exists`);\n  \t}\n  \tif (this.topics.length < 1) return;\n  \tthis.topics[topic].forEach( (listener) => {\n\t\tif (typeof to == 'undefined') {\n\t\t  \tlistener.method(data || {});\n\t\t} else {\n\t\t  \tif (to === listener.id) {\n\t\t\t\tlistener.method(data || {});\n\t\t  \t}\n\t\t}\n  \t})\n}\n\nconst eventBus = new EventBus();\n\nexport { eventBus }\n\n\n// WEBPACK FOOTER //\n// ./src/eventbus.js","import { Util } from '../util.js';\nimport { Vertices, Point } from './vertices.js'\n\n/*\n\tSHAPE -- Rectangle, Triangle, Random ...\n*/\n\nfunction Shape(vertices, identity) {\n\tthis.vertices = vertices;\n\tthis.points = vertices.points;\n\tthis.identity = identity;\n\tthis.getCenter();\n}\n\nShape.prototype.constructor = Shape;\n\nShape.prototype.update = function() {\n\tthis.vertices.updateAllExceptHull();\n\tthis.getCenter();\n}\n\nShape.prototype.getCenter = function() {\n\tthis.center = this.vertices.centroid;\n}\n\nShape.prototype.centerOn = function(pt) {\n\tpt.minus(this.center);\n\tthis.vertices.arrayAdd(this.points, pt);\n\tthis.update();\n}\n\nShape.prototype.isNearVertices = function(coord, bounds) {\n\treturn this.vertices.isNearVertices(this.points, coord, bounds);\n}\n\nShape.prototype.getVerticesNear = function(coord, bounds) {\n\tvar index = this.isNearVertices(coord, bounds);\n\treturn Util.logicalKeep(this.points, index);\n}\n\nShape.prototype.isNearCenter = function(coord, bounds) {\n\treturn this.vertices.isNearVertices([this.center], coord, bounds)[0];\n}\n\n/*\n\tDISPLAY\n*/\n\nShape.prototype.drawLine = function(canvas, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t\tpoints = this.vertices.copyPoints(this.points);\n\tpoints.push(points[0]);\n\tif (doClear)  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i=0; i<points.length-1; i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[i].x, points[i].y);\n\t\tctx.lineTo(points[i+1].x, points[i+1].y);\n\t\tctx.stroke();\n\t}\n}\n\nShape.prototype.drawDots = function(canvas, width, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t\tpoints = this.vertices.copyPoints(this.points);\n\t\tpoints.push(this.center);\n\tif (doClear)  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i=0; i<points.length; i++) {\n\t\tif (points[i].index === 0) {\n\t\t\t// ctx.fillStyle = 'red';\n\t\t\tctx.fillStyle = 'gray';\n\t\t} else if (points[i].index === 1) {\n\t\t\tctx.fillStyle = 'gray';\n\t\t} else {\n\t\t\tctx.fillStyle = 'gray';\n\t\t}\n\t\tvar x = points[i].x - width/2;\n\t\tvar y = points[i].y - width/2;\n\t\tctx.fillRect(x, y, width, width);\n\t}\n}\n\n/*\n\tLINE\n*/\n\t\nfunction Line(vertices) {\n\tvar N = vertices.points.length - 1;\n\tthis.vertices = vertices;\n\tthis.points = [vertices.points[0], vertices.points[N]];\n\tthis.identity = 'line';\n\tthis.getCenter();\n}\n\nLine.prototype = Object.create(Shape.prototype);\n\nLine.prototype.constructor = Line;\n\nLine.prototype.getCenter = function() {\n\tvar points = this.points,\n\t\tverts = this.vertices,\n\t\tx = (points[1].x - points[0].x) / 2 + points[0].x,\n\t\ty = verts.getYAlongLineAtX(x, points[0], points[1]);\n\tthis.center = new Point(x, y, 0);\n}\n\n/*\n\tCIRCLE\n*/\n\nfunction Circle(vertices, center, radius) {\n\tthis.vertices = vertices;\n\tthis.center = center;\n\tthis.radius = radius;\n\tthis.points = [center];\n\tthis.identity = 'circle';\n}\n\nCircle.prototype = Object.create(Shape.prototype);\n\nCircle.prototype.constructor = Circle;\n\nCircle.prototype.update = function() {\n\tthis.vertices.updateAllExceptHull();\n}\n\nCircle.prototype.drawLine = function(canvas, doClear) {\n\tif (typeof doClear == 'undefined') doClear = true;\n\tvar ctx = canvas.getContext('2d'),\n\t\tpoint = this.points[0],\n\t\tr = this.radius;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.beginPath();\n\tctx.arc(point.x, point.y, r, 0, Math.PI*2);\n\tctx.stroke();\n}\n\nexport { Shape, Line, Circle }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/shape.js","var Util = {};\n\nUtil.contains = function(arr, val) {\n\tfor (var i=0; i<arr.length; i++) {\n\t\tif (arr[i] === val) return true;\n\t}\n\treturn false;\n}\n\nUtil.unique = function(arr) {\n\tvar newArr = [arr[0]];\n\tfor (var i=1; i<arr.length; i++) {\n\t\tif (this.contains(newArr, arr[i])) continue;\n\t\tnewArr.push(arr[i]);\n\t}\n\treturn newArr;\n}\n\nUtil.resample = function(arr, N) {\n\tif (arr.length <= N) return arr;\n\tvar factor = Math.ceil(arr.length / N),\n\t\tresampled = [],\n\t\tstp = 0;\n\twhile (stp < arr.length) {\n\t\tresampled.push(arr[stp]);\n\t\tstp += factor;\n\t}\n\treturn resampled;\n}\n\nUtil.findMin = function(arr) {\n\tvar ind = -1,\n\t\tminimum = Infinity;\n\tfor (var i=0; i<arr.length; i++) {\n\t\tif (arr[i] < minimum) {\n\t\t\tind = i;\n\t\t\tminimum = arr[i];\n\t\t}\n\t}\n\treturn ind;\n}\n\nUtil.findMax = function(arr) {\n\tvar ind = -1,\n\t\tmaximum = -Infinity;\n\tfor (var i=0; i<arr.length; i++) {\n\t\tif (arr[i] > maximum) {\n\t\t\tind = i;\n\t\t\tmaximum = arr[i];\n\t\t}\n\t}\n\treturn ind;\n}\n\nUtil.sum = function(arr) {\n\tvar cumulative = 0;\n\tfor (var i=0; i<arr.length; i++) {\n\t\tcumulative += arr[i];\n\t}\n\treturn cumulative;\n}\n\nUtil.mean = function(arr) {\n\treturn this.sum(arr) / arr.length;\n}\n\nUtil.combs = function(arr, N) {\n\tvar output = [];\n\tgetAllPossibleCombinations(arr, N, output);\n\treturn output;\n\tfunction getCombinations(array, size, start, initialStuff, output) {\n\t    if (initialStuff.length >= size) {\n\t        output.push(initialStuff);\n\t    } else {\n\t        var i;\n\t        for (i=start; i<array.length; ++i) {\n\t\t    \tgetCombinations(array, size, i + 1, initialStuff.concat(array[i]), output);\n\t        }\n\t    }\n\t}\n\tfunction getAllPossibleCombinations(array, size, output) {\n\t    getCombinations(array, size, 0, [], output);\n\t}\n}\n\nUtil.logicalKeep = function(arr, ind) {\n\tvar newArr = [];\n\tfor (var i=0; i<arr.length; i++) {\n\t\tif (!ind[i]) continue;\n\t\tnewArr.push(arr[i]);\n\t}\n\treturn newArr;\n}\n\nUtil.randId = function(append) {\n\tlet id = Math.random().toString(36).substring(7);\n\tif (append == null) return id;\n\treturn append + id;\n}\n\nexport { Util };\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Hello from '@/components/Hello'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Hello',\n      component: Hello\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bd26cd6c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bd26cd6c\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 43\n// module chunks = 1","import { eventBus } from '../../app/src/eventbus.js';\nimport { webAudio } from '../../app/src/audio/webaudio.js';\nimport { SequenceSets } from '../../app/src/audio/sequencesets.js';\nimport { world } from '../../app/src/world.js';\nimport { Animator } from '../../app/src/animation/animator.js';\nimport { Interaction } from '../../app/src/interaction.js';\n\nvar sequenceSetManager = new SequenceSets(),\n\tfilename = webAudio.filenames[0],\n\tsequenceSet = sequenceSetManager.createSet(filename),\n\tsequenceSet2 = sequenceSetManager.createSet(filename),\n\tcanvas = document.createElement('canvas'),\n\tctx = canvas.getContext('2d'),\n\tanimator = new Animator(world, canvas),\n\tinteraction = new Interaction(world, animator);\n\neventBus.publish(eventBus.topicMap.newActiveSequenceSet, {sequenceSetId: sequenceSet.id});\neventBus.subscribe(eventBus.topicMap.newNoteTimesReady, function(data) {\n\t// console.log(data);\n});\n\nsizeCanvas();\n\ninteraction.handleTouch();\nanimator.animate();\n\nsequenceSet.createSequence(filename);\n// sequenceSet.createSequence(filename);\n\nsequenceSetManager.loop();\n\ndocument.body.appendChild(canvas);\n\nwindow.addEventListener('resize', sizeCanvas);\n\nwindow.addEventListener('keydown', function(evt) {\n\tif (evt.keyCode === 27) {\n\t\tsequenceSetManager.cancelLoop();\n\t} else if (evt.keyCode === 32) {\n\t\tsequenceSetManager.loop();\n\t}\n});\n\nfunction sizeCanvas() {\n\tcanvas.width = window.innerWidth;\n\tcanvas.height = window.innerHeight;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../playground/circle_detect/stroke_record3.js\n// module id = 44\n// module chunks = 1","<template>\n  <div id=\"app\"></div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  display: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?4246bad0","<template>\n  <div class=\"hello\">\n    <h1>{{ msg }}</h1>\n    <h2>Essential Links</h2>\n    <ul>\n      <li><a href=\"https://vuejs.org\" target=\"_blank\">Core Docs</a></li>\n      <li><a href=\"https://forum.vuejs.org\" target=\"_blank\">Forum</a></li>\n      <li><a href=\"https://gitter.im/vuejs/vue\" target=\"_blank\">Gitter Chat</a></li>\n      <li><a href=\"https://twitter.com/vuejs\" target=\"_blank\">Twitter</a></li>\n      <br>\n      <li><a href=\"http://vuejs-templates.github.io/webpack/\" target=\"_blank\">Docs for This Template</a></li>\n    </ul>\n    <h2>Ecosystem</h2>\n    <ul>\n      <li><a href=\"http://router.vuejs.org/\" target=\"_blank\">vue-router</a></li>\n      <li><a href=\"http://vuex.vuejs.org/\" target=\"_blank\">vuex</a></li>\n      <li><a href=\"http://vue-loader.vuejs.org/\" target=\"_blank\">vue-loader</a></li>\n      <li><a href=\"https://github.com/vuejs/awesome-vue\" target=\"_blank\">awesome-vue</a></li>\n    </ul>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'hello',\n  data () {\n    return {\n      msg: 'Welcome to Your Vue.js App'\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh1, h2 {\n  font-weight: normal;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\n\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Hello.vue?8b4cb386","import { eventBus } from '../eventbus.js';\nimport { webAudio } from '../audio/webaudio.js';\n\nfunction Animator(world, canvas) {\n\tthis.world = world;\n\tthis.canvas = canvas;\n\tthis.shouldAnimate = true;\n\tthis.isRecording = false;\n\tthis.stroke = [];\n\tthis.style = {\n\t\teditedVertices: {\n\t\t\tshape: 'circle',\n\t\t\tsize: 30\n\t\t}\n\t}\n\tthis.pendingNotes = [];\n\tthis.activeNotes = [];\n\tthis.noteTimeTolerance = 1/60\n\tthis.subscribe();\n}\n\nAnimator.prototype.subscribe = function() {\n\tlet newNoteTimesTopic = eventBus.topicMap.newNoteTimesReady;\n\teventBus.subscribe(newNoteTimesTopic, this.handleNewNoteTimes.bind(this));\n}\n\nAnimator.prototype.handleNewNoteTimes = function(data) {\n\tfor (let i=0; i<data.noteTimes.length; i++) {\n\t\tthis.pendingNotes.push({\n\t\t\tnoteTime: data.noteTimes[i],\n\t\t\tpoint: data.points[i],\n\t\t\tnoteDuration: data.noteDuration,\n\t\t\tloopIndex: data.loopIndex\n\t\t});\n\t}\n}\n\nAnimator.prototype.constructor = Animator;\n\nAnimator.prototype.animate = function() {\n\n\tif (!this.shouldAnimate) return;\n\n\tlet world = this.world,\n\t\tcanvas = this.canvas,\n\t\teditedShape = world.getEditedShape();\n\n\tthis.updateActiveNotes();\n\n\tif (editedShape !== undefined && !this.isRecording) {\n\t\teditedShape.drawLine(canvas);\n\t\teditedShape.drawDots(canvas, 30, false);\n\t} else if (this.isRecording) {\n\t\tthis.drawLine(this.stroke);\n\t} else {\n\t\tlet ctx = canvas.getContext('2d');\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t}\n\n\tfor (let i=0; i<this.activeNotes.length; i++) {\n\t\tif (editedShape !== undefined) {\n\t\t\tthis.drawDots([this.activeNotes[i].point], 40, false);\n\t\t}\n\t}\n\n\twindow.requestAnimationFrame(this.animate.bind(this));\n}\n\nAnimator.prototype.updateActiveNotes = function() {\n\tlet pendingNotes = [],\n\t\texpired = [];\n\tfor (let i=0; i<this.pendingNotes.length; i++) {\n\t\tlet note = this.pendingNotes[i],\n\t\t\tcurrentTime = webAudio.context.currentTime,\n\t\t\tnoteTime = note.noteTime;\n\t\tif (Math.abs(noteTime-currentTime) < this.noteTimeTolerance) {\n\t\t\tthis.activeNotes.push(note);\n\t\t} else {\n\t\t\tpendingNotes.push(note);\n\t\t}\n\t}\n\tfor (let i=0; i<this.activeNotes.length; i++) {\n\t\tlet note = this.activeNotes[i],\n\t\t\tcurrentTime = webAudio.context.currentTime,\n\t\t\tnoteTime = note.noteTime,\n\t\t\tnoteDuration = note.noteDuration;\n\t\tif ((currentTime-(noteTime+noteDuration)) > this.noteTimeTolerance) {\n\t\t\texpired.push(i-expired.length);\n\t\t}\n\t}\n\tfor (let i=0; i<expired.length; i++) {\n\t\tthis.activeNotes.splice(expired[i], 1);\n\t}\n\tthis.pendingNotes = pendingNotes;\n\t// this.activeNotes = activeNotes;\n}\n\nAnimator.prototype.drawLine = function(points, doClear) {\n\tlet canvas = this.canvas,\n\t\tctx = canvas.getContext('2d');\n\tif (typeof doClear == 'undefined') doClear = true;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (var i=0; i<points.length-1; i++) {\n\t\tctx.beginPath();\n\t\tctx.moveTo(points[i].x, points[i].y);\n\t\tctx.lineTo(points[i+1].x, points[i+1].y);\n\t\tctx.stroke();\n\t}\n}\n\nAnimator.prototype.drawDots = function(points, width, doClear) {\n\tlet canvas = this.canvas,\n\t\tctx = canvas.getContext('2d');\n\tif (typeof doClear == 'undefined') doClear = true;\n\tif (doClear) ctx.clearRect(0, 0, canvas.width, canvas.height);\n\tfor (let i=0; i<points.length; i++) {\n\t\tctx.fillStyle = 'gray';\n\t\tlet x = points[i].x - width/2;\n\t\tlet y = points[i].y - width/2;\n\t\tctx.fillRect(x, y, width, width);\n\t}\n}\n\nexport { Animator };\n\n\n// WEBPACK FOOTER //\n// ./src/animation/animator.js","import { webAudio } from './webaudio.js';\nimport { eventBus } from '../eventbus.js'\nimport { Util } from '../util.js';\n\nfunction Sequence(sequenceSet, filename) {\n\tthis.sequenceSet = sequenceSet;\n\tthis.shape = undefined;\n\tthis.id = Util.randId();\n\tthis.filename = filename;\n\tthis.shouldLoop = true;\n\tthis.isActive = false;\n\tthis.loopIndex = 0;\n\tthis.nBeats = 4;\n\tthis.noteLength = 'quarter';\n\tthis.currentBeat = webAudio.getCurrentBeat();\n\tthis.sources = [];\n\tthis.subscribe();\n}\n\nSequence.prototype.constructor = Sequence;\n\nSequence.prototype.subscribe = function() {\n\tlet topicName = eventBus.topicMap.newShapeReady;\n\teventBus.subscribe(topicName, this.registerShape.bind(this), this.id);\n}\n\nSequence.prototype.registerShape = function(data) {\n\tlet id = data.sequenceId,\n\t\tshape = data.shape;\n\tif (id !== this.id) return;\n\tif (shape === undefined) {\n\t\tthis.nBeats = 4;\n\t\tthis.noteLength = 'quarter';\n\t\tthis.shape = shape;\n\t\tfor (let i=0; i<this.sources.length; i++) {\n\t\t\tthis.sources[i].stop(0);\n\t\t}\n\t\treturn;\n\t}\n\tthis.shape = shape;\n\tswitch (shape.identity) {\n\t\tcase 'triangle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'eighthTriplet';\n\t\t\tbreak;\n\t\tcase 'rectangle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'quarter';\n\t\t\tbreak;\n\t\tcase 'circle':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'sixteenth';\n\t\t\tbreak;\n\t\tcase 'line':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'eighth';\n\t\t\tbreak;\n\t\tcase 'random':\n\t\t\tthis.nBeats = 4;\n\t\t\tthis.noteLength = 'sixteenthTriplet';\n\t\t\tbreak;\n\t}\n\t// this.loopIndex = 0;\n}\n\nSequence.prototype.loop = function() {\n\tlet self = this,\n\t\tnewActiveSequenceTopic = eventBus.topicMap.newActiveSequence;\n\n\tthis.currentBeat = webAudio.getCurrentBeat();\n\tthis.shouldLoop = true;\n\tthis.loopIndex = 0;\n\n\t//\tmark that a new active sequence has begun\n\n\teventBus.publish(newActiveSequenceTopic, {\n\t\tsequenceId: this.id,\n\t\tsequenceSetId: this.sequenceSet.id\n\t});\n\n\tconst looper = () => {\n\n\t\tif (!self.shouldLoop) return;\n\n\t\tlet currentBeat = webAudio.getCurrentBeat(),\n\t\t\tnBeats = self.nBeats,\n\t\t\tloopIndex = self.loopIndex,\n\t\t\tfilename = self.filename,\n\t\t\tnoteLength = self.noteLength,\n\t\t\tshape = self.shape,\n\t\t\tpoints,\n\t\t\tnewNotesReadyTopic = eventBus.topicMap.newNoteTimesReady;\n\n\t\tif (shape !== undefined) {\n\t\t\t// points = shape.vertices.copyPoints(shape.points)\n\t\t\tpoints = shape.points;\n\t\t\tif (shape.identity === 'rectangle') {\n\t\t\t\tpoints = [points[loopIndex]];\n\t\t\t}\n\t\t}\t\t\t\n\n\t\t//\tunless we've reached the next beat, do not proceed\n\n\t\tif (currentBeat === self.currentBeat) {\n\t\t\twindow.requestAnimationFrame(looper);\n\t\t\treturn;\n\t\t}\n\n\t\t//\tOnly calculate properties if we're the active sequence\n\n\t\t// if (this.isActive) {\n\n\t\t// }\n\n\t\t//\totherwise, schedule the appropriate number of notes associated with the\n\t\t//\tcurrent beat, and return the scheduled note times\n\n\t\tif (shape !== undefined) {\n\t\t\tlet schedule = webAudio.schedulePlay(filename, {noteLength, sequence:self}),\n\t\t\t\tcurrentTime = webAudio.context.currentTime;\n\t\t\t//\tmark self new note times are available\n\t\t\teventBus.publish(newNotesReadyTopic, {\n\t\t\t\tsequenceId: self.id,\n\t\t\t\tsequenceSetId: self.sequenceSet.id,\n\t\t\t\tnoteTimes: schedule.noteTimes,\n\t\t\t\tnoteDuration: schedule.noteDuration,\n\t\t\t\tcurrentTime, \n\t\t\t\tloopIndex, \n\t\t\t\tshape,\n\t\t\t\tpoints\n\t\t\t});\n\t\t}\n\n\t\t//\tmark the updated currentBeat\n\n\t\tself.currentBeat = currentBeat;\n\n\t\t//\tif we're on the last beat of the sequence,\n\t\t//\tquit out of the looping function, and alert the parent\n\t\t//\tself it should move to the next sequence\n\n\t\tif (loopIndex === nBeats-1) {\n\t\t\teventBus.publish('endOfSequence', {}, self.sequenceSet.id);\n\t\t\treturn;\n\t\t}\n\n\t\t//\totherwise, proceed to the next beat\n\n\t\tself.loopIndex++;\n\n\t\twindow.requestAnimationFrame(looper);\n\t}\n\n\tlooper();\n}\n\nexport { Sequence };\n\n\n// WEBPACK FOOTER //\n// ./src/audio/sequence.js","import { eventBus } from '../eventbus.js';\nimport { webAudio } from './webaudio.js';\nimport { Util } from '../util.js';\nimport { Sequence } from './sequence.js';\n\nfunction SequenceSet() {\n\tthis.sequences = [];\n\tthis.activeSequenceIndex = undefined;\n\tthis.activeSequenceId = undefined;\n\tthis.id = Util.randId();\n\tthis.subscribe();\n}\n\nSequenceSet.prototype.constructor = SequenceSet;\n\nSequenceSet.prototype.subscribe = function() {\n\tlet topicNextSequence = eventBus.topicMap.endOfSequence;\n\teventBus.subscribe(topicNextSequence, this.nextSequence.bind(this), this.id);\n}\n\nSequenceSet.prototype.cancelLoop = function() {\n\tif (this.sequences.length === 0) return;\n\tthis.sequences[this.activeSequenceIndex].shouldLoop = false;\n}\n\nSequenceSet.prototype.loop = function() {\n\tif (this.sequences.length === 0) return;\n\tlet currentSequence = this.sequences[this.activeSequenceIndex];\n\tthis.activeSequenceId = currentSequence.id;\n\tcurrentSequence.loop();\n}\n\nSequenceSet.prototype.nextSequence = function() {\n\tif (this.activeSequenceIndex === this.sequences.length-1) {\n\t\tthis.activeSequenceIndex = 0;\n\t} else {\n\t\tthis.activeSequenceIndex++;\n\t}\n\tthis.loop();\n}\n\nSequenceSet.prototype.createSequence = function(filename) {\n\tlet sequence = new Sequence(this, filename),\n\t\tsetId = this.id;\n\tthis.sequences.push(sequence);\n\tif (this.sequences.length === 1) {\n\t\tthis.activeSequenceIndex = 0;\n\t\tthis.activeSequenceId = sequence.id;\n\t}\n\teventBus.publish(eventBus.topicMap.newSequenceCreated, {\n\t\tsequenceId: sequence.id,\n\t\tsequenceSetId: setId\n\t});\n}\n\nexport { SequenceSet };\n\n\n// WEBPACK FOOTER //\n// ./src/audio/sequenceset.js","import { eventBus } from '../eventbus.js';\nimport { SequenceSet } from './sequenceset.js';\n\nfunction SequenceSets() {\n\tthis.sequenceSets = [];\n}\n\nSequenceSets.prototype.constructor = SequenceSets;\n\nSequenceSets.prototype.createSet = function(filename) {\n\tlet set = new SequenceSet(filename),\n\t\tnewSequenceSetTopicName = eventBus.topicMap.newSequenceSetCreated;\n\teventBus.publish(newSequenceSetTopicName, {sequenceSetId: set.id});\n\tthis.sequenceSets.push(set);\n\treturn set;\n}\n\nSequenceSets.prototype.loop = function() {\n\tfor (let i=0; i<this.sequenceSets.length; i++) {\n\t\tthis.sequenceSets[i].loop();\n\t}\n}\n\nSequenceSets.prototype.cancelLoop = function() {\n\tfor (let i=0; i<this.sequenceSets.length; i++) {\n\t\tthis.sequenceSets[i].cancelLoop();\n\t}\n}\n\nexport { SequenceSets };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/audio/sequencesets.js","import { Vertices, Point } from './vertices.js';\nimport { Shape, Line, Circle } from './shape.js';\nimport { Util } from '../util.js';\n\nfunction Detector(vertices) {\n\tthis.vertices = vertices;\n\tthis.criteria = {\n\t\trectangle: {\n\t\t\taxisRatioThreshold: .5\n\t\t},\n\t\tcircle: {\n\t\t\tglobalThreshold: .5\n\t\t},\n\t\ttriangle: {\n\t\t\tglobalThreshold: 10\n\t\t},\n\t\tline: {\n\t\t\tdistanceThreshold: .4,\n\t\t\tperpDistanceThreshold: .05\n\t\t},\n\t\trandom: {\n\t\t\tglobalThreshold: .5\n\t\t}\n\t}\n\tthis.estimatedVertices = {\n\t\trectangle: [],\n\t\tcircle: [],\n\t\ttriangle: [],\n\t\tline: []\n\t}\n\tthis.identity = undefined;\n}\n\nDetector.prototype.constructor = Detector;\n\n/*\n\tUPDATE ESTIMATED VERTICES\n*/\n\nDetector.prototype.updateEstimatedVertices = function() {\n\tthis.estimatedVertices.rectangle = this.getEstimatedRectVertices();\n\tthis.estimatedVertices.triangle = this.getEstimatedTriangleVertices();\n\tthis.estimatedVertices.circle = this.getEstimatedCircleVertices();\n\tthis.estimatedVertices.line = this.getEstimatedLineVertices();\n}\n\n/*\n\tESTIMATE VERTICES\n*/\n\n\nDetector.prototype.getEstimatedTriangleVertices = function() {\n\tvar verts = this.vertices.hull,\n\t\tpoints = verts.points,\n\t\tinds = [];\n\tfor (var i=0; i<points.length; i++) inds.push(i);\n\tvar area = -Infinity,\n\t\tlargestSet;\n\tinds = Util.combs(inds, 3);\n\tfor (var i=0; i<inds.length; i++) {\n\t\tvar set = inds[i],\n\t\t\tA = points[set[0]],\n\t\t\tB = points[set[1]],\n\t\t\tC = points[set[2]],\n\t\t\ttri = [A, B, C],\n\t\t\tcurrentArea = Math.abs(verts.getArea(tri));\n\t\tif (currentArea > area) {\n\t\t\tlargestSet = [A, B, C];\n\t\t\tarea = currentArea;\n\t\t}\n\t}\n\treturn largestSet\n}\n\nDetector.prototype.getEstimatedRectVertices = function() {\n\n\tvar verts = \t\tthis.vertices.hull,\n\t\tpoints = \t\tverts.points,\n\t\tcentroid = \t\tverts.centroid,\n\t\ttopLeftPts = \tpoints.filter(topLeftFunc),\n\t\ttopRightPts = \tpoints.filter(topRightFunc),\n\t\tbtmLeftPts = \tpoints.filter(btmLeftFunc),\n\t\tbtmRightPts = \tpoints.filter(btmRightFunc),\n\t\tnTopLeft = \t\ttopLeftPts.length,\n\t\tnTopRight = \ttopRightPts.length,\n\t\tnBtmLeft = \t\tbtmLeftPts.length,\n\t\tnBtmRight = \tbtmRightPts.length;\n\n\tif (nTopLeft === 0 || nTopRight === 0 \n\t\t|| nBtmLeft === 0 || nBtmRight === 0) {\n\t\treturn [];\n\t}\n\n\tvar topLeftDistances = \tverts.getDistances(centroid, topLeftPts),\n\t\ttopRightDistances = verts.getDistances(centroid, topRightPts),\n\t\tbtmLeftDistances = \tverts.getDistances(centroid, btmLeftPts),\n\t\tbtmRightDistances = verts.getDistances(centroid, btmRightPts);\n\n\tvar topLeftInd = \tUtil.findMax(topLeftDistances),\n\t\ttopRightInd = \tUtil.findMax(topRightDistances),\n\t\tbtmLeftInd = \tUtil.findMax(btmLeftDistances),\n\t\tbtmRightInd = \tUtil.findMax(btmRightDistances);\n\n\tvar topLeftPt = \ttopLeftPts[topLeftInd],\n\t\ttopRightPt = \ttopRightPts[topRightInd],\n\t\tbtmLeftPt = \tbtmLeftPts[btmLeftInd],\n\t\tbtmRightPt = \tbtmRightPts[btmRightInd];\n\n\treturn [topLeftPt, topRightPt, btmLeftPt, btmRightPt];\n\n\tfunction topLeftFunc(pt) { return pt.x < centroid.x && pt.y > centroid.y; }\n\tfunction topRightFunc(pt) { return pt.x > centroid.x && pt.y > centroid.y; }\n\tfunction btmLeftFunc(pt) { return pt.x < centroid.x && pt.y < centroid.y; }\n\tfunction btmRightFunc(pt) { return pt.x > centroid.x && pt.y < centroid.y; }\n}\n\nDetector.prototype.getEstimatedCircleVertices = function() {\n\tvar verts = this.vertices,\n\t\tpoints = verts.hull.points,\n\t\tcentroid = verts.hull.centroid,\n\t\tdistances = verts.getDistances(centroid, points),\n\t\tsummed = Util.sum(distances),\n\t\tN = distances.length,\n\t\tmean = summed/N;\n\n\tvar radius = new Point(centroid.x, centroid.y+mean, 0);\n\n\treturn [centroid, radius];\n}\n\nDetector.prototype.getEstimatedLineVertices = function() {\n\tvar N = this.vertices.points.length;\n\treturn [this.vertices.points[0], this.vertices.points[N-1]];\n}\n\n/*\n\tASSESS SHAPE LIKELIHOOD\n*/\n\nDetector.prototype.getLikelihoodRect = function() {\n\tvar rectVertices = this.estimatedVertices.rectangle;\n\n\tif (rectVertices.length === 0) return 0;\n\n\tvar hull = \t\t\tthis.vertices.hull,\n\t\ttopLeftPt = \trectVertices[0],\n\t\ttopRightPt = \trectVertices[1],\n\t\tbtmLeftPt = \trectVertices[2],\n\t\tbtmRightPt = \trectVertices[3],\n\t\tcentroid = \t\thull.centroid;\n\n\tvar axis1Ratio = getSlopeRatio(topLeftPt, btmRightPt, centroid),\n\t\taxis2Ratio = getSlopeRatio(btmLeftPt, topRightPt, centroid),\n\t\tthreshold = this.criteria.rectangle.axisRatioThreshold;\n\n\treturn Math.max(axis1Ratio, axis2Ratio);\n\n\tfunction getSlopeRatio(p0, p1, centroid) {\n\t\tvar slopeA = hull.getSlope(p0, centroid),\n\t\t\tslopeB = hull.getSlope(p1, centroid),\n\t\t\tslopeAB = hull.getSlope(p0, p1),\n\t\t\tratio = (slopeA/slopeAB) * (slopeB/slopeAB);\n\t\treturn ratio;\n\t}\n}\n\nDetector.prototype.getLikelihoodCircle = function() {\n\tvar verts = this.vertices,\n\t\thull = verts.hull,\n\t\tvertPoints = verts.points,\n\t\thullPoints = hull.points,\n\t\tnSamples = vertPoints.length,\n\t\tnHull = hullPoints.length,\n\t\tnRatio = nHull / nSamples,\n\t\trealArea = verts.area,\n\t\thullArea = hull.area,\n\t\tareaRatio = realArea / hullArea,\n\t\tperimEfficiency = verts.perimeterEfficiency,\n\t\tconfidence = perimEfficiency * nRatio * areaRatio;\n\n\treturn confidence;\n}\n\nDetector.prototype.getLikelihoodTriangle = function() {\n\tvar triangleVertices = this.estimatedVertices.triangle,\n\t\tarea = this.vertices.hull.area;\n\tif (triangleVertices === undefined) return Infinity;\n\treturn area / Math.abs(this.vertices.getArea(triangleVertices));\n}\n\nDetector.prototype.getLikelihoodLine = function() {\n\tvar verts = this.vertices,\n\t\tpoints = verts.points,\n\t\tpFirst = points[0],\n\t\tpLast = points[points.length-1],\n\t\tperpDistanceRatios = [],\n\t\tdistances = [],\n\t\tlastDistance = verts.getDistance(pFirst, pLast),\n\t\tpDistance;\n\tfor (var i=1; i<points.length-2; i++) {\n\t\tpDistance = verts.getPerpendicularDistance(points[i], pFirst, pLast);\n\t\tperpDistanceRatios.push(pDistance/lastDistance);\n\t}\n\tfor (var i=0; i<points.length-2; i++) {\n\t\tdistances.push(verts.getDistance(points[i], points[i+1]));\n\t}\n\tvar summed = Util.sum(distances),\n\t\tdistRatio = lastDistance / summed,\n\t\tmaxPerpRatio = Math.max(...perpDistanceRatios);\n\n\treturn {\n\t\tdistanceRatio: distRatio,\n\t\tperpDistanceRatio: maxPerpRatio\n\t}\n}\n\nDetector.prototype.getLikelihoodRandom = function() {\n\treturn this.vertices.perimeterEfficiency;\n}\n\n/*\n\tASSIGN SHAPE IDENTITY\n*/\n\nDetector.prototype.isRectangle = function() {\n\tvar estimate = this.getLikelihoodRect(),\n\t\tthresh = this.criteria.rectangle.axisRatioThreshold;\n\treturn Math.abs(estimate - 1) < thresh;\n}\n\nDetector.prototype.isCircle = function() {\n\tvar estimate = this.getLikelihoodCircle(),\n\t\tthresh = this.criteria.circle.globalThreshold;\n\treturn estimate > thresh;\n}\n\nDetector.prototype.isTriangle = function() {\n\tvar estimate = this.getLikelihoodTriangle(),\n\t\tthresh = this.criteria.triangle.globalThreshold;\n\treturn estimate < thresh;\n}\n\nDetector.prototype.isLine = function() {\n\tvar estimates = this.getLikelihoodLine(),\n\t\tdistanceRatio = estimates.distanceRatio,\n\t\tperpRatio = estimates.perpDistanceRatio,\n\t\tdistanceThresh = this.criteria.line.distanceThreshold,\n\t\tperpDistanceThresh = this.criteria.line.perpDistanceThreshold;\n\n\treturn distanceRatio-1 < distanceThresh && perpRatio < perpDistanceThresh;\n}\n\nDetector.prototype.isRandom = function() {\n\tvar estimate = this.getLikelihoodRandom(),\n\t\tthresh = this.criteria.random.globalThreshold;\n\n\treturn estimate < thresh;\n}\n\n/*\n\tMODIFY VERTICES\n*/\n\nDetector.prototype.getAdjustedRectVertices = function() {\n\tvar rectPoints = this.estimatedVertices.rectangle,\n\t\trectVerts = new Vertices(rectPoints),\n\t\tpoints = rectVerts._sortPointsByPolarAngle();\n\tpoints.unshift(rectVerts.anchorPoint);\n\trectVerts.points = points;\n\trectVerts.updateAllExceptHull();\n\tpoints.push(points[0]);\n\tvar distances = rectVerts.getConsecutiveDistances(points),\n\t\tL = Util.mean(distances),\n\t\tcentroid = rectVerts.centroid,\n\t\tmidPoint = new Point(L/2, L/2, 0),\n\t\tA = centroid.copy(),\n\t\tB = centroid.copy(),\n\t\tC = centroid.copy(),\n\t\tD = centroid.copy();\n\n\tA.minus(midPoint);\n\tB.x -= midPoint.x;\n\tB.y += midPoint.y;\n\tC.plus(midPoint);\n\tD.x += midPoint.x;\n\tD.y -= midPoint.y;\n\n\tvar recombinedVerts = new Vertices([A, B, C, D]);\n\trecombinedVerts.updateAll();\n\treturn recombinedVerts;\n}\n\nDetector.prototype.getAdjustedTriangleVertices = function() {\n\tvar verts = this.vertices,\n\t\ttriPoints = this.estimatedVertices.triangle,\n\t\tcentroid = verts.hull.centroid,\n\t\tdistances = verts.getDistances(centroid, triPoints),\n\t\tmeanDist = Util.mean(distances) * .9,\n\t\tnewVerts = [];\n\n\tfor (var i=0; i<3; i++) {\n\t\tvar center = centroid.copy();\n\t\tif (i === 0) {\n\t\t\tcenter.y -= meanDist;\n\t\t} else if (i === 1) {\n\t\t\tcenter.y += meanDist;\n\t\t\tcenter.x -= meanDist;\n\t\t} else {\n\t\t\tcenter.y += meanDist;\n\t\t\tcenter.x += meanDist;\n\t\t}\n\t\tnewVerts.push(center);\n\t}\n\tvar vertices = new Vertices(newVerts);\n\tvertices.updateAll();\n\treturn vertices;\n}\n\n/*\n\tGET DETECTED SHAPE\n*/\n\nDetector.prototype.getLine = function() {\n\treturn new Line(this.vertices);\n}\n\nDetector.prototype.getRectangle = function() {\n\tvar verts = this.getAdjustedRectVertices();\n\treturn new Shape(verts, 'rectangle');\n}\n\nDetector.prototype.getTriangle = function() {\n\tvar verts = this.getAdjustedTriangleVertices();\n\treturn new Shape(verts, 'triangle');\n}\n\nDetector.prototype.getCircle = function() {\n\tvar verts = this.vertices,\n\t\testimatedVertices = this.estimatedVertices.circle,\n\t\tcenter = estimatedVertices[0],\n\t\tradius = estimatedVertices[1].y - center.y;\n\treturn new Circle(verts, center, radius);\n}\n\nDetector.prototype.getRandom = function() {\n\treturn new Shape(this.vertices, 'random');\n}\n\nDetector.prototype.getDetectedShape = function() {\n\tswitch (this.identity) {\n\t\tcase 'line':\n\t\t\treturn this.getLine();\n\t\tcase 'rectangle':\n\t\t\treturn this.getRectangle();\n\t\tcase 'circle':\n\t\t\treturn this.getCircle();\n\t\tcase 'triangle':\n\t\t\treturn this.getTriangle();\n\t\tcase 'random':\n\t\t\treturn this.getRandom();\n\t\tdefault:\n\t\t\treturn this.getRandom();\n\t}\n}\n\n/*\n\tIDENTIFY\n*/\n\nDetector.prototype.identify = function() {\n\tvar isRectangle = this.isRectangle(),\n\t\tisCircle = this.isCircle(),\n\t\tisTriangle = this.isTriangle(),\n\t\tisLine = this.isLine(),\n\t\tisRandom = this.isRandom(),\n\t\tidentity;\n\n\tif (isLine) {\n\t\tidentity = 'line';\n\t} else if (isRandom) {\n\t\tidentity = 'random';\n\t} else if (isCircle) {\n\t\tidentity = 'circle';\n\t} else if (isRectangle) {\n\t\tidentity = 'rectangle';\n\t} else if (isTriangle) {\n\t\tidentity = 'triangle';\n\t} else {\n\t\tidentity = undefined;\n\t}\n\n\tthis.identity = identity;\n}\n\nexport { Detector };\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/detector.js","import { Util } from './util.js';\nimport { Detector } from './geometry/detector.js';\nimport { Shape, Line, Circle } from './geometry/shape.js';\nimport { Vertices, Point } from './geometry/vertices.js';\nimport { eventBus } from './eventbus.js';\nimport interact from 'interact.js';\n\nfunction Interaction(world, animator) {\n\tthis.world = world;\n\tthis.animator = animator;\n}\n\nInteraction.prototype.constructor = Interaction;\n\nInteraction.prototype.handleTouch = function() {\n\n\tlet self = this,\t\n\t\tposition,\n\t\tstroke = [],\n\t\tshouldContinue = true,\n\t\tshape,\n\t\tvertex,\n\t\tanimator = this.animator,\n\t\telement = animator.canvas,\n\t\tsequenceIdCurrent,\n\t\tsequenceIdOnDown,\n\t\tbounds = animator.style.editedVertices.size;\n\n\tanimator.isRecording = false;\n\n\tinteract(element)\n\t\t.on('down', down)\n\t\t.on('up', up)\n\t\t.on('move', move);\n\n\tfunction move(e) {\n\t\tposition = {x: e.clientX, y: e.clientY};\n\t}\n\tfunction down(e) {\n\t\tshouldContinue = true;\n\t\tshape = self.world.getEditedShape();\n\t\tsequenceIdOnDown = self.world.editedSequenceId;\n\t\tsequenceIdCurrent = sequenceIdOnDown;\n\t\t//\twe're making a new shape\n\t\tif (shape === undefined) {\n\t\t\tanimator.isRecording = true;\n\t\t\trequestAnimationFrame(record);\n\t\t\treturn;\n\t\t}\n\t\tlet nearbyVertices = shape.getVerticesNear(position, bounds),\n\t\t\tisNearCenter = shape.isNearCenter(position, bounds);\n\t\tif (nearbyVertices.length === 0 && !isNearCenter) {\n\t\t\tself.publishNewShape(undefined);\n\t\t\tanimator.isRecording = true;\n\t\t\trequestAnimationFrame(record);\n\t\t\treturn;\n\t\t}\n\t\tanimator.isRecording = false;\n\t\tif (nearbyVertices.length > 0) {\n\t\t\tvertex = nearbyVertices[0];\n\t\t\trequestAnimationFrame(modifyVertex);\n\t\t} else {\n\t\t\trequestAnimationFrame(modifyCenter);\n\t\t}\n\t}\n\tfunction updateCurrentSequenceId() {\n\t\tsequenceIdCurrent = self.world.editedSequenceId;\n\t}\n\tfunction up() {\n\t\tshouldContinue = false;\n\t\tupdateCurrentSequenceId();\n\t\tif (!animator.isRecording) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tanimator.isRecording = false;\n\t\tself.handleNewStroke(stroke);\n\t\tstroke = [];\n\t\tanimator.stroke = [];\n\t}\n\tfunction record() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tstroke.push(position);\n\t\tanimator.stroke = stroke;\n\t\trequestAnimationFrame(record);\n\t}\n\tfunction modifyVertex() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tvertex.x = Math.round(position.x);\n\t\tvertex.y = Math.round(position.y);\n\t\tshape.update();\t\t\t\n\t\trequestAnimationFrame(modifyVertex);\n\t}\n\tfunction modifyCenter() {\n\t\tupdateCurrentSequenceId();\n\t\tif (!shouldContinue) return;\n\t\tif (sequenceIdCurrent !== sequenceIdOnDown) return;\n\t\tvar pt = new Point(position.x, position.y, 0);\n\t\tshape.centerOn(pt);\n\t\tshape.update();\n\t\trequestAnimationFrame(modifyCenter);\n\t}\n}\n\nInteraction.prototype.publishNewShape = function(shape) {\n\tlet sequenceId = this.world.editedSequenceId,\n\t\tsequenceSetId = this.world.activeSequenceSetId,\n\t\tnewShapeTopic = eventBus.topicMap.newShapeReady;\n\teventBus.publish(newShapeTopic, {shape, sequenceId, sequenceSetId});\n}\n\nInteraction.prototype.handleNewStroke = function(stroke) {\n\tstroke = Util.unique(Util.resample(stroke, 256));\n\tlet verts = new Vertices(stroke);\n\tverts.updateAll();\n\tlet detector = new Detector(verts);\n\tdetector.updateEstimatedVertices();\n\tdetector.identify();\n\tlet shape = detector.getDetectedShape();\n\tthis.publishNewShape(shape);\n\t// \tsequenceId = this.world.editedSequenceId,\n\t// \tsequenceSetId = this.world.activeSequenceSetId,\n\t// \tnewShapeTopic = eventBus.topicMap.newShapeReady;\n\t// eventBus.publish(newShapeTopic, {shape, sequenceId, sequenceSetId});\n}\n\nexport { Interaction };\n\n\n// WEBPACK FOOTER //\n// ./src/interaction.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport '../../playground/circle_detect/stroke_record3.js'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import { eventBus } from './eventbus.js';\n\nfunction World() {\n\tthis.shapes = [];\n\tthis.subscribe();\n\tthis.editedSequenceId = undefined;\n\tthis.activeSequenceIds = [];\n\tthis.activeSequenceSetId = undefined;\n}\n\nWorld.prototype.constructor = World;\n\nWorld.prototype.subscribe = function() {\n\tlet newShapeReadyTopic = eventBus.topicMap.newShapeReady,\n\t\tnewSequenceSetCreatedTopic = eventBus.topicMap.newSequenceSetCreated,\n\t\tnewSequenceCreatedTopic = eventBus.topicMap.newSequenceCreated,\n\t\tnewActiveSequenceTopic = eventBus.topicMap.newActiveSequence,\n\t\tnewActiveSequenceSetTopic = eventBus.topicMap.newActiveSequenceSet;\n\n\teventBus.subscribe(newSequenceSetCreatedTopic, this.registerSequenceSet.bind(this));\n\teventBus.subscribe(newSequenceCreatedTopic, this.registerSequence.bind(this));\n\teventBus.subscribe(newShapeReadyTopic, this.registerShape.bind(this));\n\teventBus.subscribe(newActiveSequenceTopic, this.updateActiveSequence.bind(this));\n\teventBus.subscribe(newActiveSequenceSetTopic, this.updateActiveSequenceSet.bind(this));\n}\n\nWorld.prototype.updateEditedSequence = function() {\n\tlet index = this.findActiveSequenceIdBySequenceSetId(this.activeSequenceSetId);\n\tthis.editedSequenceId = this.activeSequenceIds[index].sequenceId;\n}\n\nWorld.prototype.updateActiveSequence = function(data) {\n\tlet sequenceSetId = data.sequenceSetId,\n\t\tsetId = data.sequenceId,\n\t\tindex = this.findActiveSequenceIdBySequenceSetId(sequenceSetId);\n\tthis.activeSequenceIds[index].sequenceId = setId;\n\tthis.updateEditedSequence();\n}\n\nWorld.prototype.updateActiveSequenceSet = function(data) {\n\tthis.activeSequenceSetId = data.sequenceSetId;\n\tthis.updateEditedSequence();\n}\n\nWorld.prototype.registerSequenceSet = function(data) {\n\tthis.activeSequenceIds.push({\n\t\tsequenceSetId: data.sequenceSetId,\n\t\tsequenceId: undefined\n\t});\n}\n\nWorld.prototype.registerSequence = function(data) {\n\tdata.shape = undefined;\n\tthis.registerShape(data);\n}\n\nWorld.prototype.registerShape = function(data) {\n\tlet shape = data.shape,\n\t\tsequenceId = data.sequenceId,\n\t\tsequenceSetId = data.sequenceSetId;\n\tif (this.isShapeWithSequenceId(sequenceId)) {\n\t\tvar ind = this.findShapeBySequenceId(sequenceId);\n\t\tthis.shapes[ind].shape = shape;\n\t} else {\n\t\tthis.shapes.push({\n\t\t\tshape,\n\t\t\tsequenceId,\n\t\t\tsequenceSetId\n\t\t});\n\t}\n}\n\nWorld.prototype.findActiveSequenceIdBySequenceSetId = function(id) {\n\tfor (let i=0; i<this.activeSequenceIds.length; i++) {\n\t\tif (this.activeSequenceIds[i].sequenceSetId === id) return i;\n\t}\n\treturn -1;\n}\n\nWorld.prototype.getShapesBySequenceSetId = function(id) {\n\treturn this.shapes.filter(function(shape) {\n\t\treturn shape.sequenceSetId === id;\n\t}).shape;\n}\n\nWorld.prototype.getShapeBySequenceId = function(id) {\n\tvar ind = this.findShapeBySequenceId(id);\n\tif (ind === -1) return undefined;\n\treturn this.shapes[ind].shape;\n}\n\nWorld.prototype.getEditedShape = function() {\n\treturn this.getShapeBySequenceId(this.editedSequenceId);\n}\n\nWorld.prototype.findShapeBySequenceId = function(id) {\n\tfor (var i=0; i<this.shapes.length; i++) {\n\t\tif (this.shapes[i].sequenceId === id) return i;\n\t}\n\treturn -1;\n}\n\nWorld.prototype.isShapeWithSequenceId = function(id) {\n\treturn this.findShapeBySequenceId(id) !== -1;\n}\n\nconst world = new World();\n\nexport { world };\n\n\n// WEBPACK FOOTER //\n// ./src/world.js","import { Util } from '../util.js';\n\n/*\n\tconstructor\n*/\n\nfunction WebAudio(properties) {\n\tthis.bpm = properties.bpm;\n\n\tthis.interval = 60 / this.bpm;\n\n\tthis.currentBeat = 1;\n\n\t//\tinitialize the AudioContext, or return -1\n\t//\tif initialization fails\n\n\tthis.context = this.initContext();\n\n\t//\tarray of buffer objects with <buffer> and <filename>\n\t//\tproperties\n\n\tthis.buffers = [];\n\tthis.filenames = properties.filenames;\n\n\t//\tdefine default playing properties\n\n\tthis.defaultPlayProperties = {\n\t\taudible: true,\n\t\tpitch: { min: 0, max: 0 }\n\t}\n\n\t//\tmake sure the object was instantiated correctly\n\n\tthis.validate();\n\n\t//\tfor proper safari playback\n\n\tthis.playedDummySound = false;\n}\n\n\n/*\n\tprototype\n*/\n\n\nWebAudio.prototype.constructor = WebAudio;\n\n//\tinitialize the audio context, or return -1 if init fails\n\nWebAudio.prototype.initContext = function() {\n\tlet audioContext = window.AudioContext || window.webkitAudioContext || -1;\n\tif ( audioContext === -1 ) return audioContext;\n\treturn new audioContext();\n}\n\n//\tmake sure we can properly instantiate a new WebAudio\n\nWebAudio.prototype.validate = function() {\n\t//\tmake sure we have window.requestAnimationFrame\n\tif ( typeof window.requestAnimationFrame == 'undefined' ) {\n\t\tthrow new Error('requestAnimationFrame is not supported in this browser');\n\t}\n\t//\tmake sure the audio context is valid\n\tif (this.context === -1) {\n\t\tthrow new Error('Web audio is not supported in this browser');\n\t}\n}\n\nWebAudio.prototype.loadTestSounds = function() {\n\tlet filenames = this.filenames, \n\t\tthat = this,\n\t\tbuffers = this.buffers\n\tfilenames.map( (name) => {\n\t\tlet fullfile = `https://dl.dropboxusercontent.com/s/mt0s5oj4tx1lre2/${name}`,\n\t\t\trequest = new XMLHttpRequest()\n\t\trequest.open('GET', fullfile, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onload = function() {\n\t\t\tthat.context.decodeAudioData(request.response, (buffer) => {\n\t\t\t\tbuffers.push({\n\t\t\t\t\tfilename: name,\n\t\t\t\t\tbuffer: buffer\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\trequest.send()\n\t})\n}\n\nWebAudio.prototype.loadSound = function(filename) {\n\n\t//\treturn a promise to load the given <filename>\n\n\tlet that = this;\n\n\treturn new Promise( (resolve, reject) => {\n\t\tlet request = new XMLHttpRequest(),\n\t\t\tfullfile = '/sounds/' + filename;\n\n\t\trequest.open('GET', fullfile);\n\t\trequest.responseType = 'arraybuffer';\n\n\t\trequest.onload = function() {\n\t\t\tthat.context.decodeAudioData(request.response, (buffer) => {\n\t\t\t\tresolve(buffer);\n\t\t\t})\n\t\t}\n\n\t\trequest.onerror = (err) => {\n\t\t\treject(err);\n\t\t}\n\n\t\trequest.send();\n\t});\n}\n\nWebAudio.prototype.loadSounds = function() {\n\n\t//\tgiven the array of stored filenames in <this>,\n\t//\tresolve each promise to load the corresponding buffer, and\n\t//\tpush each buffer to the <buffers> array in <this>\n\n\tlet promises = [],\n\t\tbuffers = this.buffers,\n\t\tfilenames = this.filenames,\n\t\tthat = this;\n\n\tfilenames.map( (file) => {\n\t\tpromises.push( that.loadSound(file) );\n\t});\n\n\tlet promise = Promise.all(promises)\n\t\t.then( (sounds) => {\n\t\t\tfor (let i=0; i<sounds.length; i++) {\n\t\t\t\tbuffers.push({\n\t\t\t\t\tfilename: filenames[i],\n\t\t\t\t\tbuffer: sounds[i]\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.catch( (err) => {\n\t\t\tconsole.log('An error occurred while loading sounds');\n\t\t});\n\n\treturn promise;\n}\n\n//\tfrom the array of buffer objects in this.buffers,\n//\treturn the buffer that matches <filename>\n\nWebAudio.prototype.getBufferByFilename = function(filename) {\n\tlet oneBuffer = this.buffers.filter( (buffer) => buffer.filename === filename );\n\tif (oneBuffer.length === 0) return -1;\n\tif (oneBuffer.length > 1) {\n\t\tthrow new Error('More than one buffer found for' + filename);\n\t}\n\treturn oneBuffer[0].buffer;\n}\n\nWebAudio.prototype.getCurrentBeat = function() {\n\tlet totalElapsedTime = this.context.currentTime,\n\t\tinterval = this.interval;\n\treturn Math.floor(totalElapsedTime / interval);\n}\n\n//\tschedule the playing of N number of notes, where N corresponds\n//\tto the note length specified in <props.noteLength>\n\nWebAudio.prototype.schedulePlay = function(filename, props) {\n\tlet interval = this.interval,\n\t\tcurrentBeat = this.getCurrentBeat(),\n\t\tnoteLength = props.noteLength,\n\t\tscheduledTime,\n\t\tbeatsToSchedule,\n\t\tduration,\n\t\tscheduledTimes = [];\n\n\tswitch (noteLength) {\n\t\tcase 'quarter':\n\t\t\tbeatsToSchedule = 1;\n\t\t\tbreak;\n\t\tcase 'eighth':\n\t\t\tbeatsToSchedule = 2;\n\t\t\tbreak;\n\t\tcase 'eighthTriplet':\n\t\t\tbeatsToSchedule = 3;\n\t\t\tbreak;\n\t\tcase 'sixteenth':\n\t\t\tbeatsToSchedule = 4;\n\t\t\tbreak;\n\t\tcase 'sixteenthTriplet':\n\t\t\tbeatsToSchedule = 6;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error(`Unrecognized noteLength ${noteLength}`);\n\t}\n\n\t//\tfirst scheduled time\n\n\tscheduledTime = (currentBeat * interval) + interval/beatsToSchedule;\n\n\t//\tnote length\n\n\tduration = interval/beatsToSchedule;\n\n\t//\tupdate the current beat\n\n\tthis.currentBeat = currentBeat;\n\n\tprops.sequence.sources = [];\n\n\tfor (let i=0; i<beatsToSchedule; i++) {\n\t\tlet playTime = scheduledTime + (interval/beatsToSchedule) * i,\n\t\t\tplayProps = Object.assign(props, {when: playTime});\n\n\t\t//\tplay each note at time <playTime>\n\n\t\tthis.play(filename, playProps);\n\n\t\t//\tfor output\n\n\t\tscheduledTimes.push(playTime);\n\t}\n\n\treturn {noteTimes: scheduledTimes, noteDuration: duration};\n}\n\nWebAudio.prototype.play = function(filename, props) {\n\tlet source = this.context.createBufferSource(),\n\t\tbuffer = this.getBufferByFilename(filename),\n\t\tdefaultPlayProperties = this.defaultPlayProperties,\n\t\twhen = props.when || 0;\n\n\tif ( buffer === -1 ) throw new Error(`Could not find ${filename}`);\n\n\tprops = Object.assign({}, defaultPlayProperties, props);\n\n\tprops.sequence.sources.push(source);\n\n\t//\tif this set of beats is set to be silent, return\n\n\tif (!props.audible) return;\n\n\tsource.buffer = buffer;\n\tsource.connect(this.context.destination);\n\tsource.start(when);\n}\n\nWebAudio.prototype.playDummySound = function() {\n\tif ( this.playedDummySound ) return;\n\n\tlet buffer = this.context.createBuffer(1, 22050, 44100),\n\t\tsource = this.context.createBufferSource();\n\n\tsource.buffer = buffer;\n\tsource.connect(this.context.destination);\n\tsource.start(0);\n\n\tthis.playedDummySound = true\n}\n\n\n/*\n\tinstantiate\n*/\n\nconst webAudio = new WebAudio({\n\tbpm: 85, filenames: ['downychirp.wav']\n});\nwebAudio.loadTestSounds();\nwebAudio.playDummySound();\n\n// const webAudio = new WebAudio({\n// \tbpm: 85, filenames: ['808_hi.mp3', 'perc_kick.mp3', 'piano_g.mp3', 'celeste_g.mp3']\n// })\n\nexport { webAudio }\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/audio/webaudio.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d560100\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Hello.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Hello.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d560100\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Hello.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-2d560100\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Hello.vue\n// module id = 97\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"hello\"\n  }, [_c('h1', [_vm._v(_vm._s(_vm.msg))]), _vm._v(\" \"), _c('h2', [_vm._v(\"Essential Links\")]), _vm._v(\" \"), _vm._m(0), _vm._v(\" \"), _c('h2', [_vm._v(\"Ecosystem\")]), _vm._v(\" \"), _vm._m(1)])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://vuejs.org\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Core Docs\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://forum.vuejs.org\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Forum\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://gitter.im/vuejs/vue\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Gitter Chat\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://twitter.com/vuejs\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Twitter\")])]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vuejs-templates.github.io/webpack/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Docs for This Template\")])])])\n},function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', [_c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://router.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vue-router\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vuex.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vuex\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"http://vue-loader.vuejs.org/\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"vue-loader\")])]), _vm._v(\" \"), _c('li', [_c('a', {\n    attrs: {\n      \"href\": \"https://github.com/vuejs/awesome-vue\",\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"awesome-vue\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d560100\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Hello.vue\n// module id = 98\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-bd26cd6c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 99\n// module chunks = 1"],"sourceRoot":""}